<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>servlet</title><link href='https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color:#ffffff; --text-color:#333333; --select-text-bg-color:#B5D6FC; --select-text-font-color:auto; --monospace:"Lucida Console",Consolas,"Courier",monospace; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; tab-size: 4; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; word-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 40px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write li > figure:first-child { margin-top: -20px; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; }
button, input, select, textarea { color: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 2; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px !important; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror-linenumber { user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-diagram-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; }
  #write { margin-top: 0px; padding-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  html.blink-to-pdf { font-size: 13px; }
  .typora-export #write { padding-left: 32px; padding-right: 32px; padding-bottom: 0px; break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  @page { margin: 20mm 0px; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
[contenteditable="true"]:active, [contenteditable="true"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.html-for-mac .inline-math-svg .MathJax_SVG { vertical-align: 0.2px; }
.md-math-block .MathJax_SVG_Display { text-align: center; margin: 0px; position: relative; text-indent: 0px; max-width: none; max-height: none; min-height: 0px; min-width: 100%; width: auto; overflow-y: hidden; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: var(--monospace); }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: 400; line-height: normal; zoom: 90%; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; }
.MathJax_SVG * { transition: none; }
.MathJax_SVG_Display svg { vertical-align: middle !important; margin-bottom: 0px !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="mermaid"] svg, [lang="flow"] svg { max-width: 100%; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow-y: hidden; overflow-x: auto; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 30px; z-index: 3; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; word-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { word-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root { --side-bar-bg-color: #fafafa; --control-text-color: #777; }
html { font-size: 16px; -webkit-font-smoothing: antialiased; }
body { font-family: "Open Sans", "Clear Sans", "Helvetica Neue", Helvetica, Arial, "Segoe UI Emoji", sans-serif; color: rgb(0, 64, 80); line-height: 1.6; }
#write { max-width: 860px; margin: 0px auto; padding: 30px 30px 100px; }
@media only screen and (min-width: 1400px) {
  #write { max-width: 1024px; }
}
@media only screen and (min-width: 1800px) {
  #write { max-width: 1200px; }
}
#write > ul:first-child, #write > ol:first-child { margin-top: 30px; }
a { color: rgb(65, 131, 196); }
h1, h2, h3, h4, h5, h6 { position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.4; cursor: text; }
h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor { text-decoration: none; }
h1 tt, h1 code { font-size: inherit; }
h2 tt, h2 code { font-size: inherit; }
h3 tt, h3 code { font-size: inherit; }
h4 tt, h4 code { font-size: inherit; }
h5 tt, h5 code { font-size: inherit; }
h6 tt, h6 code { font-size: inherit; }
h1 { font-size: 2.25em; line-height: 1.2; border-bottom: 1px solid rgb(238, 238, 238); }
h2 { font-size: 1.75em; line-height: 1.225; border-bottom: 1px solid rgb(238, 238, 238); }
h3 { font-size: 1.5em; line-height: 1.43; }
h4 { font-size: 1.25em; }
h5 { font-size: 1em; }
h6 { font-size: 1em; color: rgb(119, 119, 119); }
p, blockquote, ul, ol, dl, table { margin: 0.8em 0px; }
li > ol, li > ul { margin: 0px; }
hr { height: 2px; padding: 0px; margin: 16px 0px; background-color: rgb(231, 231, 231); border: 0px none; overflow: hidden; box-sizing: content-box; }
li p.first { display: inline-block; }
ul, ol { padding-left: 30px; }
ul:first-child, ol:first-child { margin-top: 0px; }
ul:last-child, ol:last-child { margin-bottom: 0px; }
blockquote { border-left: 5px solid rgb(66, 185, 131); padding: 8px 15px; color: rgb(33, 93, 66); background-color: rgb(243, 245, 247); }
blockquote blockquote { padding-right: 0px; }
table { padding: 0px; word-break: initial; }
table tr { border: 1px solid rgb(223, 226, 229); margin: 0px; padding: 0px; }
table tr:nth-child(2n), thead { background-color: rgb(248, 248, 248); }
table th { font-weight: bold; border-width: 1px 1px 0px; border-top-style: solid; border-right-style: solid; border-left-style: solid; border-top-color: rgb(223, 226, 229); border-right-color: rgb(223, 226, 229); border-left-color: rgb(223, 226, 229); border-image: initial; border-bottom-style: initial; border-bottom-color: initial; margin: 0px; padding: 6px 13px; }
table td { border: 1px solid rgb(223, 226, 229); margin: 0px; padding: 6px 13px; }
table th:first-child, table td:first-child { margin-top: 0px; }
table th:last-child, table td:last-child { margin-bottom: 0px; }
.CodeMirror-lines { padding-left: 4px; }
.code-tooltip { box-shadow: rgba(0, 28, 36, 0.3) 0px 1px 1px 0px; border-top: 1px solid rgb(238, 242, 242); }
.md-fences, code, tt { border: 1px solid rgb(231, 234, 237); background-color: rgb(248, 248, 248); border-radius: 3px; padding: 2px 4px 0px; font-size: 0.9em; }
code { background-color: rgb(243, 244, 244); padding: 2px; color: rgb(209, 37, 115); }
.md-fences { margin-bottom: 15px; margin-top: 15px; padding-top: 8px; padding-bottom: 6px; }
.md-task-list-item > input { margin-left: -1.3em; }
@media print {
  html { font-size: 13px; }
  table, pre { break-inside: avoid; }
  pre { word-wrap: break-word; }
}
.md-fences { background-color: rgb(248, 248, 248); }
#write pre.md-meta-block { padding: 1rem; font-size: 85%; line-height: 1.45; background-color: rgb(247, 247, 247); border: 0px; border-radius: 3px; color: rgb(119, 119, 119); margin-top: 0px !important; }
.mathjax-block > .code-tooltip { bottom: 0.375rem; }
.md-mathjax-midline { background: rgb(250, 250, 250); }
#write > h3.md-focus::before { left: -1.5625rem; top: 0.375rem; }
#write > h4.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
#write > h5.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
#write > h6.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
.md-image > .md-meta { border-radius: 3px; padding: 2px 0px 0px 4px; font-size: 0.9em; color: inherit; }
.md-tag { color: rgb(167, 167, 167); opacity: 1; }
.md-toc { margin-top: 20px; padding-bottom: 20px; }
.sidebar-tabs { border-bottom: none; }
#typora-quick-open { border: 1px solid rgb(221, 221, 221); background-color: rgb(248, 248, 248); }
#typora-quick-open-item { background-color: rgb(250, 250, 250); border-color: rgb(254, 254, 254) rgb(229, 229, 229) rgb(229, 229, 229) rgb(238, 238, 238); border-style: solid; border-width: 1px; }
.on-focus-mode blockquote { border-left-color: rgba(85, 85, 85, 0.12); }
header, .context-menu, .megamenu-content, footer { font-family: "Segoe UI", Arial, sans-serif; }
.file-node-content:hover .file-node-icon, .file-node-content:hover .file-node-open-state { visibility: visible; }
.mac-seamless-mode #typora-sidebar { background-color: var(--side-bar-bg-color); }
.md-lang { color: rgb(180, 101, 77); }
#md-notification .btn { border: 0px; }
.dropdown-menu .divider { border-color: rgb(229, 229, 229); opacity: 0.4; }
.ty-preferences .window-content { background-color: rgb(250, 250, 250); }
.ty-preferences .nav-group-item.active { color: white; background: rgb(153, 153, 153); }
.menu-item-container a.menu-style-btn { background-color: rgb(245, 248, 250); background-image: linear-gradient(rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0)); }
#write mark { background: transparent; color: rgb(216, 105, 105); font-weight: bold; }
p .md-image:only-child { width: auto; text-align: left; }


.cm-s-inner { background-color: rgb(38, 50, 56); color: rgb(233, 237, 237); }
.cm-s-inner .CodeMirror-gutters { background: rgb(38, 50, 56); color: rgb(83, 127, 126); border: none; }
.cm-s-inner .CodeMirror-guttermarker, .cm-s-inner .CodeMirror-guttermarker-subtle, .cm-s-inner .CodeMirror-linenumber { color: rgb(83, 127, 126); }
.cm-s-inner .CodeMirror-cursor { border-left: 1px solid rgb(248, 248, 240); }
.cm-s-inner div.CodeMirror-selected { background: rgba(255, 255, 255, 0.15); }
.cm-s-inner.CodeMirror-focused div.CodeMirror-selected { background: rgba(255, 255, 255, 0.1); }
.cm-s-inner .CodeMirror-line::selection, .cm-s-inner .CodeMirror-line > span::selection, .cm-s-inner .CodeMirror-line > span > span::selection { background: rgba(255, 255, 255, 0.1); }
.cm-s-inner .CodeMirror-activeline-background { background: rgba(0, 0, 0, 0); }
.cm-s-inner .cm-keyword { color: rgb(199, 146, 234); }
.cm-s-inner .cm-operator { color: rgb(233, 237, 237); }
.cm-s-inner .cm-variable-2 { color: rgb(128, 203, 196); }
.cm-s-inner .cm-variable-3 { color: rgb(158, 255, 255); }
.cm-s-inner .cm-builtin { color: rgb(222, 203, 107); }
.cm-s-inner .cm-atom { color: rgb(247, 118, 105); }
.cm-s-inner .cm-number { color: rgb(247, 118, 105); }
.cm-s-inner .cm-def { color: rgb(233, 237, 237); }
.cm-s-inner .cm-string { color: rgb(195, 232, 141); }
.cm-s-inner .cm-string-2 { color: rgb(128, 203, 196); }
.cm-s-inner .cm-comment { color: rgb(84, 110, 122); }
.cm-s-inner .cm-variable { color: rgb(158, 255, 255); }
.cm-s-inner .cm-tag { color: rgb(128, 203, 196); }
.cm-s-inner .cm-meta { color: rgb(128, 203, 196); }
.cm-s-inner .cm-attribute { color: rgb(255, 203, 107); }
.cm-s-inner .cm-property { color: rgb(128, 203, 174); }
.cm-s-inner .cm-qualifier { color: rgb(222, 203, 107); }
.cm-s-inner .cm-variable-3 { color: rgb(222, 203, 107); }
.cm-s-inner .cm-tag { color: rgb(255, 83, 112); }
.cm-s-inner .cm-error { color: rgb(255, 255, 255); background-color: rgb(236, 95, 103); }
.cm-s-inner .CodeMirror-matchingbracket { text-decoration: underline; color: white !important; }
.md-fences { background-color: rgb(38, 50, 56); color: rgb(233, 237, 237); border: none; }
.md-fences .code-tooltip { background-color: rgb(38, 50, 56); }




</style>
</head>
<body class='typora-export os-windows' >
<div  id='write'  class = 'is-node first-line-indent'><h1><a name='header-n0' class='md-header-anchor '></a>Servlet学习</h1><blockquote><p>Author：Zhry（lixzhou）</p><p>Email：<a href='mailto:2553179694@qq.com' target='_blank' class='url'>2553179694@qq.com</a></p><p>Date：2022-7-27 16:56:36</p><p>Version：1.0.0</p></blockquote><div class='md-toc' mdtype='toc'><p class="md-toc-content"><span class="md-toc-item md-toc-h1" data-ref="n0"><a class="md-toc-inner" href="#header-n0">Servlet学习</a></span><span class="md-toc-item md-toc-h2" data-ref="n9"><a class="md-toc-inner" href="#header-n9">1. C/S架构和B/S架构</a></span><span class="md-toc-item md-toc-h3" data-ref="n10"><a class="md-toc-inner" href="#header-n10">1.1 C/S架构（Client/Server 客户端/服务器）</a></span><span class="md-toc-item md-toc-h3" data-ref="n11"><a class="md-toc-inner" href="#header-n11">1.2 B/S架构（Browser/Server 浏览器/服务器）</a></span><span class="md-toc-item md-toc-h2" data-ref="n12"><a class="md-toc-inner" href="#header-n12">2. 服务器</a></span><span class="md-toc-item md-toc-h3" data-ref="n13"><a class="md-toc-inner" href="#header-n13">2.1 Web概念</a></span><span class="md-toc-item md-toc-h3" data-ref="n14"><a class="md-toc-inner" href="#header-n14">2.2 Web服务器</a></span><span class="md-toc-item md-toc-h3" data-ref="n15"><a class="md-toc-inner" href="#header-n15">2.3 常见服务器</a></span><span class="md-toc-item md-toc-h3" data-ref="n16"><a class="md-toc-inner" href="#header-n16">2.4 Tomcat使用</a></span><span class="md-toc-item md-toc-h4" data-ref="n17"><a class="md-toc-inner" href="#header-n17">2.4.1 目录结构</a></span><span class="md-toc-item md-toc-h3" data-ref="n51"><a class="md-toc-inner" href="#header-n51">2.5 Tomcat启动和停止</a></span><span class="md-toc-item md-toc-h4" data-ref="n52"><a class="md-toc-inner" href="#header-n52">2.5.1 启动</a></span><span class="md-toc-item md-toc-h4" data-ref="n55"><a class="md-toc-inner" href="#header-n55">2.5.2 停止</a></span><span class="md-toc-item md-toc-h4" data-ref="n59"><a class="md-toc-inner" href="#header-n59">2.5.3 修改端口号</a></span><span class="md-toc-item md-toc-h3" data-ref="n63"><a class="md-toc-inner" href="#header-n63">2.6 项目部署和访问静态资源</a></span><span class="md-toc-item md-toc-h4" data-ref="n66"><a class="md-toc-inner" href="#header-n66">2.6.1 创建项目</a></span><span class="md-toc-item md-toc-h4" data-ref="n83"><a class="md-toc-inner" href="#header-n83">2.6.2 URL访问资源</a></span><span class="md-toc-item md-toc-h3" data-ref="n87"><a class="md-toc-inner" href="#header-n87">2.7 常见错误</a></span><span class="md-toc-item md-toc-h4" data-ref="n88"><a class="md-toc-inner" href="#header-n88">2.7.1 Tomcat控制台闪退</a></span><span class="md-toc-item md-toc-h4" data-ref="n91"><a class="md-toc-inner" href="#header-n91">2.7.2 404</a></span><span class="md-toc-item md-toc-h2" data-ref="n94"><a class="md-toc-inner" href="#header-n94">3. Servlet</a></span><span class="md-toc-item md-toc-h3" data-ref="n95"><a class="md-toc-inner" href="#header-n95">3.1 概念</a></span><span class="md-toc-item md-toc-h3" data-ref="n98"><a class="md-toc-inner" href="#header-n98">3.2 开发步骤</a></span><span class="md-toc-item md-toc-h4" data-ref="n99"><a class="md-toc-inner" href="#header-n99">3.2.1 搭建开发环境</a></span><span class="md-toc-item md-toc-h4" data-ref="n102"><a class="md-toc-inner" href="#header-n102">3.2.2 编写Servlet</a></span><span class="md-toc-item md-toc-h4" data-ref="n111"><a class="md-toc-inner" href="#header-n111">3.2.3 部署Servlet</a></span><span class="md-toc-item md-toc-h4" data-ref="n114"><a class="md-toc-inner" href="#header-n114">3.2.4 配置Servlet</a></span><span class="md-toc-item md-toc-h3" data-ref="n122"><a class="md-toc-inner" href="#header-n122">3.3 运行测试</a></span><span class="md-toc-item md-toc-h3" data-ref="n125"><a class="md-toc-inner" href="#header-n125">3.4 常见错误</a></span><span class="md-toc-item md-toc-h4" data-ref="n126"><a class="md-toc-inner" href="#header-n126">3.4.1 500</a></span><span class="md-toc-item md-toc-h2" data-ref="n129"><a class="md-toc-inner" href="#header-n129">4. IDEA创建Web项目</a></span><span class="md-toc-item md-toc-h3" data-ref="n136"><a class="md-toc-inner" href="#header-n136">4.1 导出war包</a></span><span class="md-toc-item md-toc-h2" data-ref="n142"><a class="md-toc-inner" href="#header-n142">5. HTTP协议</a></span><span class="md-toc-item md-toc-h3" data-ref="n143"><a class="md-toc-inner" href="#header-n143">5.1 什么是HTTP协议</a></span><span class="md-toc-item md-toc-h3" data-ref="n146"><a class="md-toc-inner" href="#header-n146">5.2 HTTP协议特点</a></span><span class="md-toc-item md-toc-h3" data-ref="n164"><a class="md-toc-inner" href="#header-n164">5.3 HTTP协议通信流程</a></span><span class="md-toc-item md-toc-h3" data-ref="n175"><a class="md-toc-inner" href="#header-n175">5.4 HTTP请求报文和相应报文</a></span><span class="md-toc-item md-toc-h4" data-ref="n176"><a class="md-toc-inner" href="#header-n176">5.4.1 请求报文</a></span><span class="md-toc-item md-toc-h4" data-ref="n180"><a class="md-toc-inner" href="#header-n180">5.4.2 响应报文</a></span><span class="md-toc-item md-toc-h3" data-ref="n184"><a class="md-toc-inner" href="#header-n184">5.5 常见状态码</a></span><span class="md-toc-item md-toc-h2" data-ref="n210"><a class="md-toc-inner" href="#header-n210">6. Servlet详解</a></span><span class="md-toc-item md-toc-h3" data-ref="n211"><a class="md-toc-inner" href="#header-n211">6.1 Servlet核心接口和类</a></span><span class="md-toc-item md-toc-h4" data-ref="n214"><a class="md-toc-inner" href="#header-n214">6.1.1 Servlet接口</a></span><span class="md-toc-item md-toc-h4" data-ref="n228"><a class="md-toc-inner" href="#header-n228">6.1.2 GenericServlet类</a></span><span class="md-toc-item md-toc-h4" data-ref="n231"><a class="md-toc-inner" href="#header-n231">6.1.3 HttpServlet类</a></span><span class="md-toc-item md-toc-h3" data-ref="n235"><a class="md-toc-inner" href="#header-n235">6.2 Servlet两种创建方式</a></span><span class="md-toc-item md-toc-h4" data-ref="n236"><a class="md-toc-inner" href="#header-n236">6.2.1 实现接口Servlet</a></span><span class="md-toc-item md-toc-h4" data-ref="n238"><a class="md-toc-inner" href="#header-n238">6.2.2 继承HttpServlet</a></span><span class="md-toc-item md-toc-h4" data-ref="n240"><a class="md-toc-inner" href="#header-n240">6.2.3 常见错误</a></span><span class="md-toc-item md-toc-h3" data-ref="n254"><a class="md-toc-inner" href="#header-n254">6.3 Servlet两种配置方式</a></span><span class="md-toc-item md-toc-h4" data-ref="n255"><a class="md-toc-inner" href="#header-n255">6.3.1 使用web.xml</a></span><span class="md-toc-item md-toc-h4" data-ref="n257"><a class="md-toc-inner" href="#header-n257">6.3.2 配置属性</a></span><span class="md-toc-item md-toc-h4" data-ref="n287"><a class="md-toc-inner" href="#header-n287">6.3.3 使用注解</a></span><span class="md-toc-item md-toc-h4" data-ref="n289"><a class="md-toc-inner" href="#header-n289">6.3.4 @WebServlet注解常用属性</a></span><span class="md-toc-item md-toc-h2" data-ref="n300"><a class="md-toc-inner" href="#header-n300">7. Servlet应用</a></span><span class="md-toc-item md-toc-h3" data-ref="n301"><a class="md-toc-inner" href="#header-n301">7.1 request对象</a></span><span class="md-toc-item md-toc-h4" data-ref="n305"><a class="md-toc-inner" href="#header-n305">7.1.1 get和post区别</a></span><span class="md-toc-item md-toc-h4" data-ref="n327"><a class="md-toc-inner" href="#header-n327">7.1.2 request主要方法</a></span><span class="md-toc-item md-toc-h4" data-ref="n338"><a class="md-toc-inner" href="#header-n338">7.1.3 request应用</a></span><span class="md-toc-item md-toc-h4" data-ref="n345"><a class="md-toc-inner" href="#header-n345">7.1.4 get/post请求乱码解决</a></span><span class="md-toc-item md-toc-h3" data-ref="n350"><a class="md-toc-inner" href="#header-n350">7.2 response对象</a></span><span class="md-toc-item md-toc-h4" data-ref="n354"><a class="md-toc-inner" href="#header-n354">7.2.1 response主要方法</a></span><span class="md-toc-item md-toc-h4" data-ref="n371"><a class="md-toc-inner" href="#header-n371">7.2.2 response应用</a></span><span class="md-toc-item md-toc-h4" data-ref="n373"><a class="md-toc-inner" href="#header-n373">7.2.3 输出中文乱码解决方案</a></span><span class="md-toc-item md-toc-h3" data-ref="n386"><a class="md-toc-inner" href="#header-n386">7.3 综合案例（Servlet + Jdbc）</a></span><span class="md-toc-item md-toc-h4" data-ref="n387"><a class="md-toc-inner" href="#header-n387">7.3.1 导入maven依赖</a></span><span class="md-toc-item md-toc-h4" data-ref="n389"><a class="md-toc-inner" href="#header-n389">7.3.2 数据库</a></span><span class="md-toc-item md-toc-h4" data-ref="n391"><a class="md-toc-inner" href="#header-n391">7.3.3 配置文件</a></span><span class="md-toc-item md-toc-h4" data-ref="n393"><a class="md-toc-inner" href="#header-n393">7.3.4 DbUtils</a></span><span class="md-toc-item md-toc-h4" data-ref="n395"><a class="md-toc-inner" href="#header-n395">7.3.5 User</a></span><span class="md-toc-item md-toc-h4" data-ref="n397"><a class="md-toc-inner" href="#header-n397">7.3.6 UserDao</a></span><span class="md-toc-item md-toc-h4" data-ref="n399"><a class="md-toc-inner" href="#header-n399">7.3.7 UserDaoImpl</a></span><span class="md-toc-item md-toc-h4" data-ref="n401"><a class="md-toc-inner" href="#header-n401">7.3.8 UserService</a></span><span class="md-toc-item md-toc-h4" data-ref="n403"><a class="md-toc-inner" href="#header-n403">7.3.9 UserServiceImpl</a></span><span class="md-toc-item md-toc-h4" data-ref="n405"><a class="md-toc-inner" href="#header-n405">7.3.10 Html页面</a></span><span class="md-toc-item md-toc-h4" data-ref="n407"><a class="md-toc-inner" href="#header-n407">7.3.11 LoginServlet</a></span><span class="md-toc-item md-toc-h4" data-ref="n409"><a class="md-toc-inner" href="#header-n409">7.3.12 ShowAllUserServlet</a></span><span class="md-toc-item md-toc-h2" data-ref="n411"><a class="md-toc-inner" href="#header-n411">8. 转发和重定向</a></span><span class="md-toc-item md-toc-h3" data-ref="n412"><a class="md-toc-inner" href="#header-n412">8.1 问题</a></span><span class="md-toc-item md-toc-h4" data-ref="n422"><a class="md-toc-inner" href="#header-n422">8.1.1 业务、显示分离</a></span><span class="md-toc-item md-toc-h4" data-ref="n424"><a class="md-toc-inner" href="#header-n424">8.1.2 ShowAllServlet</a></span><span class="md-toc-item md-toc-h4" data-ref="n426"><a class="md-toc-inner" href="#header-n426">8.1.3 ShowAllUserController</a></span><span class="md-toc-item md-toc-h4" data-ref="n428"><a class="md-toc-inner" href="#header-n428">8.1.4 ShowAllUserJSP</a></span><span class="md-toc-item md-toc-h3" data-ref="n430"><a class="md-toc-inner" href="#header-n430">8.2 转发</a></span><span class="md-toc-item md-toc-h4" data-ref="n433"><a class="md-toc-inner" href="#header-n433">8.2.1 页面跳转</a></span><span class="md-toc-item md-toc-h4" data-ref="n443"><a class="md-toc-inner" href="#header-n443">8.2.2 数据传递</a></span><span class="md-toc-item md-toc-h4" data-ref="n464"><a class="md-toc-inner" href="#header-n464">8.2.3 转发特点</a></span><span class="md-toc-item md-toc-h3" data-ref="n477"><a class="md-toc-inner" href="#header-n477">8.3 重定向</a></span><span class="md-toc-item md-toc-h4" data-ref="n480"><a class="md-toc-inner" href="#header-n480">8.3.1 页面跳转</a></span><span class="md-toc-item md-toc-h4" data-ref="n493"><a class="md-toc-inner" href="#header-n493">8.3.2 数据传递</a></span><span class="md-toc-item md-toc-h4" data-ref="n503"><a class="md-toc-inner" href="#header-n503">8.3.3 重定向的特点</a></span><span class="md-toc-item md-toc-h3" data-ref="n516"><a class="md-toc-inner" href="#header-n516">8.4 总结</a></span><span class="md-toc-item md-toc-h2" data-ref="n519"><a class="md-toc-inner" href="#header-n519">9. Servlet生命周期</a></span><span class="md-toc-item md-toc-h3" data-ref="n520"><a class="md-toc-inner" href="#header-n520">9.1 生命周期的四个阶段</a></span><span class="md-toc-item md-toc-h4" data-ref="n521"><a class="md-toc-inner" href="#header-n521">9.1.1 实例化</a></span><span class="md-toc-item md-toc-h4" data-ref="n528"><a class="md-toc-inner" href="#header-n528">9.1.2 初始化</a></span><span class="md-toc-item md-toc-h4" data-ref="n534"><a class="md-toc-inner" href="#header-n534">9.1.3 服务</a></span><span class="md-toc-item md-toc-h4" data-ref="n540"><a class="md-toc-inner" href="#header-n540">9.1.4 销毁</a></span><span class="md-toc-item md-toc-h4" data-ref="n543"><a class="md-toc-inner" href="#header-n543">9.1.5 Servlet执行流程</a></span><span class="md-toc-item md-toc-h4" data-ref="n545"><a class="md-toc-inner" href="#header-n545">9.1.6 代码</a></span><span class="md-toc-item md-toc-h2" data-ref="n547"><a class="md-toc-inner" href="#header-n547">10. Servlet特性</a></span><span class="md-toc-item md-toc-h3" data-ref="n548"><a class="md-toc-inner" href="#header-n548">10.1 线程安全问题</a></span><span class="md-toc-item md-toc-h3" data-ref="n551"><a class="md-toc-inner" href="#header-n551">10.2 如何保证线程安全</a></span><span class="md-toc-item md-toc-h2" data-ref="n566"><a class="md-toc-inner" href="#header-n566">11. 状态管理</a></span><span class="md-toc-item md-toc-h3" data-ref="n567"><a class="md-toc-inner" href="#header-n567">11.1 问题</a></span><span class="md-toc-item md-toc-h3" data-ref="n576"><a class="md-toc-inner" href="#header-n576">11.2 概念</a></span><span class="md-toc-item md-toc-h3" data-ref="n579"><a class="md-toc-inner" href="#header-n579">11.3 状态管理分类</a></span><span class="md-toc-item md-toc-h2" data-ref="n586"><a class="md-toc-inner" href="#header-n586">12. Cookie的使用</a></span><span class="md-toc-item md-toc-h3" data-ref="n587"><a class="md-toc-inner" href="#header-n587">12.1 Cookie概念</a></span><span class="md-toc-item md-toc-h3" data-ref="n597"><a class="md-toc-inner" href="#header-n597">12.2 创建Cookie</a></span><span class="md-toc-item md-toc-h3" data-ref="n599"><a class="md-toc-inner" href="#header-n599">12.3 获取Cookie</a></span><span class="md-toc-item md-toc-h3" data-ref="n601"><a class="md-toc-inner" href="#header-n601">12.4 修改Cookie</a></span><span class="md-toc-item md-toc-h3" data-ref="n607"><a class="md-toc-inner" href="#header-n607">12.5 Cookie编码与解码</a></span><span class="md-toc-item md-toc-h4" data-ref="n615"><a class="md-toc-inner" href="#header-n615">12.5.1 创建带中文Cookie</a></span><span class="md-toc-item md-toc-h4" data-ref="n617"><a class="md-toc-inner" href="#header-n617">12.5.2 读取带中文Cookie</a></span><span class="md-toc-item md-toc-h3" data-ref="n619"><a class="md-toc-inner" href="#header-n619">12.6 Cookie优缺点</a></span><span class="md-toc-item md-toc-h4" data-ref="n620"><a class="md-toc-inner" href="#header-n620">12.6.1 优点</a></span><span class="md-toc-item md-toc-h4" data-ref="n629"><a class="md-toc-inner" href="#header-n629">12.6.2 缺点</a></span><span class="md-toc-item md-toc-h2" data-ref="n638"><a class="md-toc-inner" href="#header-n638">13. 三层架构</a></span><span class="md-toc-item md-toc-h2" data-ref="n671"><a class="md-toc-inner" href="#header-n671">14. Session对象</a></span><span class="md-toc-item md-toc-h3" data-ref="n672"><a class="md-toc-inner" href="#header-n672">14.1 Session概述</a></span><span class="md-toc-item md-toc-h3" data-ref="n679"><a class="md-toc-inner" href="#header-n679">14.2 Session原理</a></span><span class="md-toc-item md-toc-h3" data-ref="n690"><a class="md-toc-inner" href="#header-n690">14.2 Session使用</a></span><span class="md-toc-item md-toc-h4" data-ref="n702"><a class="md-toc-inner" href="#header-n702">14.2.1 获取Session</a></span><span class="md-toc-item md-toc-h4" data-ref="n706"><a class="md-toc-inner" href="#header-n706">14.2.2 Session保存数据</a></span><span class="md-toc-item md-toc-h4" data-ref="n710"><a class="md-toc-inner" href="#header-n710">14.2.3 Session获取数据</a></span><span class="md-toc-item md-toc-h4" data-ref="n714"><a class="md-toc-inner" href="#header-n714">14.2.4 Session移除数据</a></span><span class="md-toc-item md-toc-h3" data-ref="n718"><a class="md-toc-inner" href="#header-n718">14.4 Session与Request的应用区别</a></span><span class="md-toc-item md-toc-h4" data-ref="n725"><a class="md-toc-inner" href="#header-n725">14.4.1 Session应用</a></span><span class="md-toc-item md-toc-h3" data-ref="n730"><a class="md-toc-inner" href="#header-n730">14.5 Session的生命周期</a></span><span class="md-toc-item md-toc-h3" data-ref="n750"><a class="md-toc-inner" href="#header-n750">14.6 浏览器禁用Cookie解决方案</a></span><span class="md-toc-item md-toc-h4" data-ref="n751"><a class="md-toc-inner" href="#header-n751">14.6.1 浏览器禁用Cookie后果</a></span><span class="md-toc-item md-toc-h4" data-ref="n754"><a class="md-toc-inner" href="#header-n754">14.6.2 URL重写</a></span><span class="md-toc-item md-toc-h4" data-ref="n757"><a class="md-toc-inner" href="#header-n757">14.6.2 实现URL重写</a></span><span class="md-toc-item md-toc-h3" data-ref="n761"><a class="md-toc-inner" href="#header-n761">14.7 Session实战权限验证</a></span><span class="md-toc-item md-toc-h4" data-ref="n765"><a class="md-toc-inner" href="#header-n765">14.7.1 login.html</a></span><span class="md-toc-item md-toc-h4" data-ref="n767"><a class="md-toc-inner" href="#header-n767">14.7.2 LoginServlet</a></span><span class="md-toc-item md-toc-h4" data-ref="n769"><a class="md-toc-inner" href="#header-n769">14.7.3 ShowAllUserController</a></span><span class="md-toc-item md-toc-h4" data-ref="n771"><a class="md-toc-inner" href="#header-n771">14.7.4 ShowAllUserJSP</a></span><span class="md-toc-item md-toc-h3" data-ref="n773"><a class="md-toc-inner" href="#header-n773">14.8 Session实战保存验证码</a></span><span class="md-toc-item md-toc-h4" data-ref="n774"><a class="md-toc-inner" href="#header-n774">14.8.1 login.html</a></span><span class="md-toc-item md-toc-h4" data-ref="n776"><a class="md-toc-inner" href="#header-n776">14.8.2 CreateCodeController</a></span><span class="md-toc-item md-toc-h4" data-ref="n778"><a class="md-toc-inner" href="#header-n778">14.8.3 LoginServlet</a></span><span class="md-toc-item md-toc-h2" data-ref="n780"><a class="md-toc-inner" href="#header-n780">15. ServletContext对象</a></span><span class="md-toc-item md-toc-h3" data-ref="n781"><a class="md-toc-inner" href="#header-n781">15.1 ServletContext概述</a></span><span class="md-toc-item md-toc-h3" data-ref="n790"><a class="md-toc-inner" href="#header-n790">15.2 获取ServletContext对象</a></span><span class="md-toc-item md-toc-h3" data-ref="n799"><a class="md-toc-inner" href="#header-n799">15.3 ServletContext作用</a></span><span class="md-toc-item md-toc-h4" data-ref="n800"><a class="md-toc-inner" href="#header-n800">15.3.1 获取项目真实路径</a></span><span class="md-toc-item md-toc-h4" data-ref="n804"><a class="md-toc-inner" href="#header-n804">15.3.2 获取项目上下文路径</a></span><span class="md-toc-item md-toc-h4" data-ref="n808"><a class="md-toc-inner" href="#header-n808">15.3.3 全局容器</a></span><span class="md-toc-item md-toc-h3" data-ref="n818"><a class="md-toc-inner" href="#header-n818">15.4 ServletContext特点</a></span><span class="md-toc-item md-toc-h3" data-ref="n825"><a class="md-toc-inner" href="#header-n825">15.5 ServeltContext应用场景</a></span><span class="md-toc-item md-toc-h3" data-ref="n829"><a class="md-toc-inner" href="#header-n829">15.6 作用域总结</a></span><span class="md-toc-item md-toc-h2" data-ref="n838"><a class="md-toc-inner" href="#header-n838">16. 过滤器</a></span><span class="md-toc-item md-toc-h3" data-ref="n839"><a class="md-toc-inner" href="#header-n839">16.1 问题</a></span><span class="md-toc-item md-toc-h3" data-ref="n842"><a class="md-toc-inner" href="#header-n842">16.2 概念</a></span><span class="md-toc-item md-toc-h3" data-ref="n846"><a class="md-toc-inner" href="#header-n846">16.3 过滤器作用</a></span><span class="md-toc-item md-toc-h3" data-ref="n853"><a class="md-toc-inner" href="#header-n853">16.4 编写过滤器</a></span><span class="md-toc-item md-toc-h4" data-ref="n856"><a class="md-toc-inner" href="#header-n856">16.4.1 实现过程</a></span><span class="md-toc-item md-toc-h3" data-ref="n866"><a class="md-toc-inner" href="#header-n866">16.5 过滤器配置</a></span><span class="md-toc-item md-toc-h4" data-ref="n867"><a class="md-toc-inner" href="#header-n867">16.5.1 注解配置</a></span><span class="md-toc-item md-toc-h4" data-ref="n870"><a class="md-toc-inner" href="#header-n870">16.5.2 xml文件配置</a></span><span class="md-toc-item md-toc-h4" data-ref="n872"><a class="md-toc-inner" href="#header-n872">16.5.3 过滤器路径</a></span><span class="md-toc-item md-toc-h3" data-ref="n882"><a class="md-toc-inner" href="#header-n882">16.6 过滤器链和优先级</a></span><span class="md-toc-item md-toc-h4" data-ref="n883"><a class="md-toc-inner" href="#header-n883">16.6.1 过滤器链</a></span><span class="md-toc-item md-toc-h4" data-ref="n888"><a class="md-toc-inner" href="#header-n888">16.6.2 过滤器优先级</a></span><span class="md-toc-item md-toc-h3" data-ref="n900"><a class="md-toc-inner" href="#header-n900">16.7 过滤器典型应用</a></span><span class="md-toc-item md-toc-h4" data-ref="n901"><a class="md-toc-inner" href="#header-n901">16.7.1 过滤器解决编码问题</a></span><span class="md-toc-item md-toc-h4" data-ref="n903"><a class="md-toc-inner" href="#header-n903">16.7.2 过滤器登录验证</a></span><span class="md-toc-item md-toc-h2" data-ref="n905"><a class="md-toc-inner" href="#header-n905">17. 综合案例</a></span><span class="md-toc-item md-toc-h3" data-ref="n906"><a class="md-toc-inner" href="#header-n906">17.1 数据库环境搭建</a></span><span class="md-toc-item md-toc-h4" data-ref="n907"><a class="md-toc-inner" href="#header-n907">17.1.1 创建数据库</a></span><span class="md-toc-item md-toc-h4" data-ref="n908"><a class="md-toc-inner" href="#header-n908">17.1.2 创建数据表</a></span><span class="md-toc-item md-toc-h3" data-ref="n909"><a class="md-toc-inner" href="#header-n909">17.2 创建Web项目</a></span><span class="md-toc-item md-toc-h3" data-ref="n910"><a class="md-toc-inner" href="#header-n910">17.3 基础环境搭建</a></span><span class="md-toc-item md-toc-h3" data-ref="n911"><a class="md-toc-inner" href="#header-n911">17.4 管理员登录功能</a></span><span class="md-toc-item md-toc-h3" data-ref="n912"><a class="md-toc-inner" href="#header-n912">17.5 查询所有员工功能</a></span><span class="md-toc-item md-toc-h4" data-ref="n913"><a class="md-toc-inner" href="#header-n913">17.5.1 调用业务逻辑Controller</a></span><span class="md-toc-item md-toc-h4" data-ref="n914"><a class="md-toc-inner" href="#header-n914">17.5.2 显示页面JSP</a></span><span class="md-toc-item md-toc-h4" data-ref="n915"><a class="md-toc-inner" href="#header-n915">17.5.3 权限验证过滤器</a></span><span class="md-toc-item md-toc-h4" data-ref="n916"><a class="md-toc-inner" href="#header-n916">17.5.4 字符编码过滤器</a></span><span class="md-toc-item md-toc-h3" data-ref="n917"><a class="md-toc-inner" href="#header-n917">17.6 删除员工功能</a></span><span class="md-toc-item md-toc-h4" data-ref="n918"><a class="md-toc-inner" href="#header-n918">17.6.1 删除员工Controller</a></span><span class="md-toc-item md-toc-h3" data-ref="n919"><a class="md-toc-inner" href="#header-n919">17.7 修改员工功能</a></span><span class="md-toc-item md-toc-h4" data-ref="n920"><a class="md-toc-inner" href="#header-n920">17.7.1 查询单个员工Controller</a></span><span class="md-toc-item md-toc-h4" data-ref="n921"><a class="md-toc-inner" href="#header-n921">17.7.2 显示修改页面JSP</a></span><span class="md-toc-item md-toc-h4" data-ref="n922"><a class="md-toc-inner" href="#header-n922">17.7.3 修改员工信息Controller</a></span><span class="md-toc-item md-toc-h3" data-ref="n923"><a class="md-toc-inner" href="#header-n923">18. 后会有期</a></span></p></div><p>&nbsp;</p><h2><a name='header-n9' class='md-header-anchor '></a>1. C/S架构和B/S架构</h2><h3><a name='header-n10' class='md-header-anchor '></a>1.1 C/S架构（Client/Server 客户端/服务器）</h3><h3><a name='header-n11' class='md-header-anchor '></a>1.2 B/S架构（Browser/Server 浏览器/服务器）</h3><h2><a name='header-n12' class='md-header-anchor '></a>2. 服务器</h2><h3><a name='header-n13' class='md-header-anchor '></a>2.1 Web概念</h3><h3><a name='header-n14' class='md-header-anchor '></a>2.2 Web服务器</h3><h3><a name='header-n15' class='md-header-anchor '></a>2.3 常见服务器</h3><h3><a name='header-n16' class='md-header-anchor '></a>2.4 Tomcat使用</h3><h4><a name='header-n17' class='md-header-anchor '></a>2.4.1 目录结构</h4><figure><table><thead><tr><th>文件夹</th><th>说明</th><th>备注</th></tr></thead><tbody><tr><td>bin</td><td>存放二进制可执行文件</td><td>startup.bat启动Tomcat、shutdown.bat停止Tomcat</td></tr><tr><td>conf</td><td>最为重要的文件夹：server.xml、web.xml</td><td>server.xml：配置整个服务器信息，如修改端口号，编码格式等</td></tr><tr><td>lib</td><td>Tomcat类库，存放运行需要的jar文件</td><td>&nbsp;</td></tr><tr><td>logs</td><td>存放日志文件，记录了启动和关闭的信息，如果启动有误，异常也会记录在日志文件中</td><td>&nbsp;</td></tr><tr><td>temp</td><td>临时文件，在停止Tomcat后会删除</td><td>&nbsp;</td></tr><tr><td>webapps</td><td>存放web项目的目录，其中每个文件夹都是一个项目，其中ROOT是一个特殊的项目，在地址栏中没有给出项目目录时，对应的就是ROOT项目</td><td>&nbsp;</td></tr><tr><td>work</td><td>运行生成的文件，最终运行的文件都在这里</td><td>当客户端访问一个JSP文件时，Tomcat会通过JSP生成Java文件，然后再编译Java文件生成class文件，生成的Java文件和class文件都会存放在这个目录下</td></tr></tbody></table></figure><h3><a name='header-n51' class='md-header-anchor '></a>2.5 Tomcat启动和停止</h3><h4><a name='header-n52' class='md-header-anchor '></a>2.5.1 启动</h4><blockquote><p>进入tomcat目录下，双击startup.bat启动程序</p></blockquote><h4><a name='header-n55' class='md-header-anchor '></a>2.5.2 停止</h4><blockquote><p>进入tomcat目录下，双击shotdown.bat关闭程序</p><p>浏览器进入：<a href='http://localhost:8080' target='_blank' class='url'>http://localhost:8080</a></p></blockquote><h4><a name='header-n59' class='md-header-anchor '></a>2.5.3 修改端口号</h4><blockquote><p>Tomcat默认端口号为8080，可以通过conf/server.xml文件修改</p></blockquote><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="xml"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="xml"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 7.99478px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">Connector</span> <span class="cm-attribute">port</span>=<span class="cm-string">"8080"</span> <span class="cm-attribute">protocol</span>=<span class="cm-string">"HTTP/1.1"</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-attribute">connectionTimeout</span>=<span class="cm-string">"20000"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-attribute">redirectPort</span>=<span class="cm-string">"8443"</span> <span class="cm-tag cm-bracket">/&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 90px;"></div><div class="CodeMirror-gutters" style="display: none; height: 90px;"></div></div></div></pre><h3><a name='header-n63' class='md-header-anchor '></a>2.6 项目部署和访问静态资源</h3><blockquote><p>Tomcat是Web服务器，项目应用部署在webapps下，通过特定url进行访问</p></blockquote><h4><a name='header-n66' class='md-header-anchor '></a>2.6.1 创建项目</h4><blockquote><ul><li><p>在webapps中建立文件夹（项目应用）</p><ul><li><p>创建WEB-INF文件夹，用于存放项目核心内容</p><ul><li>创建classes，存放.class文件</li><li>创建lib，存放jar文件</li><li>创建web.xml，项目配置文件（ROOT项目下的WEB-INF复制即可）</li></ul></li><li><p>把网页hello.html复制到项目文件夹中，与WEB-INF在同级目录</p></li></ul></li></ul></blockquote><h4><a name='header-n83' class='md-header-anchor '></a>2.6.2 URL访问资源</h4><blockquote><p>浏览器输入URL：<a href='http://localhost:8080/myweb/hello.html' target='_blank' class='url'>http://localhost:8080/myweb/hello.html</a></p><p>URL主要有4部分组成：协议、主机、端口、资源路径</p></blockquote><h3><a name='header-n87' class='md-header-anchor '></a>2.7 常见错误</h3><h4><a name='header-n88' class='md-header-anchor '></a>2.7.1 Tomcat控制台闪退</h4><blockquote><p>检查JAVA_HOME配置是否正确</p></blockquote><h4><a name='header-n91' class='md-header-anchor '></a>2.7.2 404</h4><blockquote><p>访问路径不存在，出现404错误</p></blockquote><h2><a name='header-n94' class='md-header-anchor '></a>3. Servlet</h2><h3><a name='header-n95' class='md-header-anchor '></a>3.1 概念</h3><blockquote><p>Servlet：是服务器端的程序，可交互式的处理客户端发送到服务器的请求，并完成操作响应</p></blockquote><h3><a name='header-n98' class='md-header-anchor '></a>3.2 开发步骤</h3><h4><a name='header-n99' class='md-header-anchor '></a>3.2.1 搭建开发环境</h4><blockquote><p>将Servlet相关jar包（lib\servlet-api.jar）配置到classpath中</p></blockquote><h4><a name='header-n102' class='md-header-anchor '></a>3.2.2 编写Servlet</h4><blockquote><ul><li>实现javax.servlet.Servlet</li><li>重写5个主要方法</li><li>在核心的service()方法中编写输出语句，打印访问结果</li></ul></blockquote><h4><a name='header-n111' class='md-header-anchor '></a>3.2.3 部署Servlet</h4><blockquote><p>编译后，将生成的.class文件放在WEB-INF/classes文件中</p></blockquote><h4><a name='header-n114' class='md-header-anchor '></a>3.2.4 配置Servlet</h4><blockquote><p>编写WEB-INF下项目配置文件web.xml</p></blockquote><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="xml"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="xml"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8.16406px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">&lt;!--添加servlet节点--&gt;</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">servlet</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">servlet-name</span><span class="cm-tag cm-bracket">&gt;</span>MyServlet<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">servlet-name</span><span class="cm-tag cm-bracket">&gt;</span> <span class="cm-comment">&lt;!--别名--&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">servlet-class</span><span class="cm-tag cm-bracket">&gt;</span>com.qf.servlet.MyServlet<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">servlet-class</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">servlet</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">&lt;!--添加servlet-mapping节点--&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">servlet-mapping</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">servlet-name</span><span class="cm-tag cm-bracket">&gt;</span>MyServlet<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">servlet-name</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">url-pattern</span><span class="cm-tag cm-bracket">&gt;</span>/myservlet<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">url-pattern</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">servlet-mapping</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag cm-error">web-app</span><span class="cm-tag cm-bracket cm-error">&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 405px;"></div><div class="CodeMirror-gutters" style="display: none; height: 405px;"></div></div></div></pre><blockquote><ul><li>注意：url-pattern配置的内容就是地址栏输入的URL中项目名称后资源的内容</li></ul></blockquote><h3><a name='header-n122' class='md-header-anchor '></a>3.3 运行测试</h3><blockquote><p>启动Tomcat，在浏览器地址栏中输入<a href='http://localhost:8080/myweb/myservlet' target='_blank' class='url'>http://localhost:8080/myweb/myservlet</a>进行访问</p></blockquote><h3><a name='header-n125' class='md-header-anchor '></a>3.4 常见错误</h3><h4><a name='header-n126' class='md-header-anchor '></a>3.4.1 500</h4><blockquote><p>服务器出现异常</p></blockquote><h2><a name='header-n129' class='md-header-anchor '></a>4. IDEA创建Web项目</h2><blockquote><p>通过IDEA集成Tomcat服务器，实现自动部署</p><p>File &gt;&gt; Setings &gt;&gt; Bulid,Execution,Deployment &gt;&gt; Application Servers &gt;&gt; +Tomcat Server &gt;&gt; OK </p><p>添加项目配置：Run/Debug Configurations &gt;&gt; +Tomcat Server &gt;&gt; Local &gt;&gt; Deployment &gt;&gt; +Artifact &gt;&gt; OK</p><p>关联第三方jar包：WEB-INF &gt;&gt; lib &gt;&gt; Add ad library &gt;&gt; servlet-api.jar</p><p>项目重构</p></blockquote><h3><a name='header-n136' class='md-header-anchor '></a>4.1 导出war包</h3><blockquote><p>war包可以直接放在Tomcat的webapps目录下，启动Tomcat后自动解压即可访问</p></blockquote><blockquote><p>Project Structure &gt;&gt; Artifacts &gt;&gt; +Web Application Archive &gt;&gt; For &quot;WebPriject:war_exploded&quot;</p><p>Build &gt;&gt; Build Artifacts<span>	</span></p></blockquote><h2><a name='header-n142' class='md-header-anchor '></a>5. HTTP协议</h2><h3><a name='header-n143' class='md-header-anchor '></a>5.1 什么是HTTP协议</h3><blockquote><p>超文本传输协议是互联网上应用最为广泛的一种网络协议，是一个基于请求与响应模式的、无状态的、应用层的协议，运行于TCP协议基础之上</p></blockquote><h3><a name='header-n146' class='md-header-anchor '></a>5.2 HTTP协议特点</h3><blockquote><ul><li><p>支持客户端（浏览器）/服务器模式</p></li><li><p>简单快速：客户端只向服务器发送请求方法和路径，服务器即可响应数据，因而通信速度很快。请求方法常用的有GET,POST等</p></li><li><p>灵活：HTTP允许传输任意类型的数据，传输的数据类型由Content-Type标识</p></li><li><p>无连接：无连接指每次TCP连接只处理一个或多个请求后，即断开连接，采用这种方式可以节省传输时间</p><ul><li>HTTP1.0版本是响应一个请求之后直接断开，称为短连接</li><li>HTTP1.1版本不是响应后直接断开，而是等待几秒钟，几秒内若有新的请求，还是通过之前的连接通道来收发消息，若过了几秒用户没有发送新的请求，则断开连接，称为长连接</li></ul></li><li><p>无状态：HTTP协议是无状态协议（对事务处理没有记忆能力）</p></li></ul></blockquote><h3><a name='header-n164' class='md-header-anchor '></a>5.3 HTTP协议通信流程</h3><blockquote><ul><li>客户与服务器建立连接（三次握手）</li><li>客户向服务器发送请求</li><li>服务器接收请求，并根据请求返回相应的文件作为应答</li><li>客户与服务器关闭连接（四次挥手）</li></ul></blockquote><h3><a name='header-n175' class='md-header-anchor '></a>5.4 HTTP请求报文和相应报文</h3><h4><a name='header-n176' class='md-header-anchor '></a>5.4.1 请求报文</h4><blockquote><p>浏览器向Web服务器发出请求时，它向服务器传递了一个数据块，也就是请求信息（请求报文），HTTP请求信息由4部分组成：请求行（请求方法/地址 URL协议/版本 ）、请求头、空行、请求正文</p></blockquote><p><img src='https://img-blog.csdnimg.cn/b7b8d7ab58974cefa647d2bc9460930a.png' alt='在这里插入图片描述' referrerPolicy='no-referrer' /></p><h4><a name='header-n180' class='md-header-anchor '></a>5.4.2 响应报文</h4><blockquote><p>HTTP响应也由4个部分组成：状态行、响应头、空行、响应正文</p></blockquote><p><img src='https://img-blog.csdnimg.cn/4e39c147ded6448ca52f366bdde3cc14.png' alt='在这里插入图片描述' referrerPolicy='no-referrer' /></p><h3><a name='header-n184' class='md-header-anchor '></a>5.5 常见状态码</h3><figure><table><thead><tr><th>状态代码</th><th>状态描述</th><th>说明</th></tr></thead><tbody><tr><td>200</td><td>OK</td><td>客户端请求成功</td></tr><tr><td>302</td><td>Found</td><td>临时重定向</td></tr><tr><td>403</td><td>Forbidden</td><td>服务器收到请求，但是拒绝提供服务。服务器通常会在响应正文中给出不提供服务的原因</td></tr><tr><td>404</td><td>Not Found</td><td>请求资源不存在，如输错了URL</td></tr><tr><td>500</td><td>Internal_Server_Error</td><td>服务器发生不可预期的错误，导致无法完成客户端的请求</td></tr></tbody></table></figure><h2><a name='header-n210' class='md-header-anchor '></a>6. Servlet详解</h2><h3><a name='header-n211' class='md-header-anchor '></a>6.1 Servlet核心接口和类</h3><blockquote><p>在Servlet体系结构中，除了实现Servlet接口，还可以通过集成GenericServlet或HttpServlet类，完成编写。</p></blockquote><h4><a name='header-n214' class='md-header-anchor '></a>6.1.1 Servlet接口</h4><blockquote><p>在Servlet API中最重要的是Servlet接口，所有Servlet都会直接或间接与该接口发生联系，或是直接实现该接口，或间接继承自实现了该接口的类，该接口主要包括以下五个方法：</p><ul><li>init(ServletConfig config)</li><li>ServletConfig getServletConfig()</li><li>service(ServletRequest req,ServletResponse res)</li><li>String getServletInfo()</li><li>destroy()</li></ul></blockquote><h4><a name='header-n228' class='md-header-anchor '></a>6.1.2 GenericServlet类</h4><blockquote><p>GenericServlet类使编写Servlet更加容易，它提供生命周期的方法init和destory的简单实现，要编写一般的Servlet，只需重写抽象service方法即可</p></blockquote><h4><a name='header-n231' class='md-header-anchor '></a>6.1.3 HttpServlet类</h4><blockquote><p>HttpServlet是继承GenericServlet的基础上进一步的扩展。提供将要被子类化以创建适用于web站点的HTTP servlet的抽象类</p><p>HttpServlet的子类至少必须重写一个方法，该方法通常是以下这些方法之一：doGet，servlet支持HTTP GET请求 doPost，用于HTTP POST请求 doPut，用于HTTP PUT请求 doDelete，用于HTTP DELETE请求</p></blockquote><h3><a name='header-n235' class='md-header-anchor '></a>6.2 Servlet两种创建方式</h3><h4><a name='header-n236' class='md-header-anchor '></a>6.2.1 实现接口Servlet</h4><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8.16406px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">package</span> <span class="cm-def">com</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">javax</span>.<span class="cm-variable">servlet</span>.<span class="cm-variable">ServletConfig</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">javax</span>.<span class="cm-variable">servlet</span>.<span class="cm-variable">ServletException</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">javax</span>.<span class="cm-variable">servlet</span>.<span class="cm-variable">ServletRequest</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">javax</span>.<span class="cm-variable">servlet</span>.<span class="cm-variable">ServletResponse</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">java</span>.<span class="cm-variable">io</span>.<span class="cm-variable">IOException</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">Servlet</span> <span class="cm-keyword">implements</span> <span class="cm-variable">javax</span>.<span class="cm-variable">servlet</span>.<span class="cm-variable">Servlet</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">init</span>(<span class="cm-variable">ServletConfig</span> <span class="cm-variable">servletConfig</span>) <span class="cm-keyword">throws</span> <span class="cm-variable">ServletException</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable">ServletConfig</span> <span class="cm-variable">getServletConfig</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-atom">null</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">service</span>(<span class="cm-variable">ServletRequest</span> <span class="cm-variable">servletRequest</span>, <span class="cm-variable">ServletResponse</span> <span class="cm-variable">servletResponse</span>) <span class="cm-keyword">throws</span> <span class="cm-variable">ServletException</span>, <span class="cm-variable">IOException</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">String</span> <span class="cm-variable">getServletInfo</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-atom">null</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">destroy</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 923px;"></div><div class="CodeMirror-gutters" style="display: none; height: 923px;"></div></div></div></pre><h4><a name='header-n238' class='md-header-anchor '></a>6.2.2 继承HttpServlet</h4><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8.16406px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">package</span> <span class="cm-def">com</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">java</span>.<span class="cm-variable">io</span>.<span class="cm-operator">*</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">javax</span>.<span class="cm-variable">servlet</span>.<span class="cm-variable">http</span>.<span class="cm-operator">*</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">javax</span>.<span class="cm-variable">servlet</span>.<span class="cm-variable">annotation</span>.<span class="cm-operator">*</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">@WebServlet</span>(<span class="cm-variable">name</span> <span class="cm-operator">=</span> <span class="cm-string">"helloServlet"</span>, <span class="cm-variable">value</span> <span class="cm-operator">=</span> <span class="cm-string">"/hello-servlet"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">HelloServlet</span> <span class="cm-keyword">extends</span> <span class="cm-variable">HttpServlet</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-variable-3">String</span> <span class="cm-variable">message</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">init</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">message</span> <span class="cm-operator">=</span> <span class="cm-string">"Hello World!"</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">doGet</span>(<span class="cm-variable">HttpServletRequest</span> <span class="cm-variable">request</span>, <span class="cm-variable">HttpServletResponse</span> <span class="cm-variable">response</span>) <span class="cm-keyword">throws</span> <span class="cm-variable">IOException</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">response</span>.<span class="cm-variable">setContentType</span>(<span class="cm-string">"text/html"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// Hello</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">PrintWriter</span> <span class="cm-variable">out</span> <span class="cm-operator">=</span> <span class="cm-variable">response</span>.<span class="cm-variable">getWriter</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"&lt;html&gt;&lt;body&gt;"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"&lt;h1&gt;"</span> <span class="cm-operator">+</span> <span class="cm-variable">message</span> <span class="cm-operator">+</span> <span class="cm-string">"&lt;/h1&gt;"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">destroy</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 788px;"></div><div class="CodeMirror-gutters" style="display: none; height: 788px;"></div></div></div></pre><h4><a name='header-n240' class='md-header-anchor '></a>6.2.3 常见错误</h4><blockquote><ul><li><p>HTTP Status 404 资源找不到</p><ul><li>地址书写错误</li><li>将IDEA项目的out目录删除，重新运行</li></ul></li><li><p>Servlet地址配置重复：both mapped to the url-pattern</p></li><li><p>Servlet地址配置错误：</p></li></ul></blockquote><h3><a name='header-n254' class='md-header-anchor '></a>6.3 Servlet两种配置方式</h3><h4><a name='header-n255' class='md-header-anchor '></a>6.3.1 使用web.xml</h4><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="xml" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="xml"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8.16406px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">&lt;?xml</span> <span class="cm-meta">version="1.0" encoding="UTF-8"?&gt;</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">web-app</span> <span class="cm-attribute">xmlns</span>=<span class="cm-string">"http://xmlns.jcp.org/xml/ns/javaee"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-attribute">xmlns:xsi</span>=<span class="cm-string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-attribute">xsi:schemaLocation</span>=<span class="cm-string">"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-attribute">version</span>=<span class="cm-string">"4.0"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">&lt;!--Servlet配置--&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">servlet</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">&lt;!--名称--&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">servlet-name</span><span class="cm-tag cm-bracket">&gt;</span>myServlet<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">servlet-name</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">&lt;!--全类名--&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">servlet-class</span><span class="cm-tag cm-bracket">&gt;</span>com.MyFirstServlet<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">servlet-class</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">&lt;!--启动优先级，数字越小越先起作用--&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">servlet</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">servlet-mapping</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">&lt;!--名称--&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">servlet-name</span><span class="cm-tag cm-bracket">&gt;</span>myServlet<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">servlet-name</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">&lt;!--资源配置规则：精确匹配--&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">url-pattern</span><span class="cm-tag cm-bracket">&gt;</span>/myFirstServlet<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">url-pattern</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">&lt;!--访问地址：http://localhost:8080/JavaWebProject_war_exploded/myFirstServlet--&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">servlet-mapping</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">welcome-file-list</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  <span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">welcome-file</span><span class="cm-tag cm-bracket">&gt;</span>login.html<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">welcome-file</span><span class="cm-tag cm-bracket">&gt;</span> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">welcome-file-list</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">web-app</span><span class="cm-tag cm-bracket">&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 990px;"></div><div class="CodeMirror-gutters" style="display: none; height: 990px;"></div></div></div></pre><h4><a name='header-n257' class='md-header-anchor '></a>6.3.2 配置属性</h4><blockquote><p>url-pattern定义匹配规则取值：</p><figure><table><thead><tr><th>精确匹配</th><th>/具体名称</th><th>只有url路径是指定名称时触发Servlet</th></tr></thead><tbody><tr><td>后缀匹配</td><td>*.xxx</td><td>只要是以xxx结尾的就匹配触发Servelt</td></tr><tr><td>通配符匹配</td><td>/*</td><td>匹配所有请求，包含服务器的所有资源</td></tr><tr><td>通配符匹配</td><td>/</td><td>匹配所有请求，包含服务器的所有资源，不包括jsp</td></tr></tbody></table></figure><p>load-on-startup：</p><figure><table><thead><tr><th>1元素标记容器是否应该在web应用程序启动时加载这个Servlet</th></tr></thead><tbody><tr><td>2值必须是一个整数，表示servlet被加载的先后顺序</td></tr><tr><td>3如果该元素的值为负数或没有设置，则当Servlet被请求时加载</td></tr><tr><td>4如果值为正数或0时，表示在启动时加载servlet，值越小，优先级越高</td></tr></tbody></table></figure></blockquote><h4><a name='header-n287' class='md-header-anchor '></a>6.3.3 使用注解</h4><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8.16406px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">package</span> <span class="cm-def">com</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">java</span>.<span class="cm-variable">io</span>.<span class="cm-operator">*</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">javax</span>.<span class="cm-variable">servlet</span>.<span class="cm-variable">http</span>.<span class="cm-operator">*</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">javax</span>.<span class="cm-variable">servlet</span>.<span class="cm-variable">annotation</span>.<span class="cm-operator">*</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">@WebServlet</span>(<span class="cm-variable">name</span> <span class="cm-operator">=</span> <span class="cm-string">"helloServlet"</span>, <span class="cm-variable">value</span> <span class="cm-operator">=</span> <span class="cm-string">"/hello-servlet"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">HelloServlet</span> <span class="cm-keyword">extends</span> <span class="cm-variable">HttpServlet</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">private</span> <span class="cm-variable-3">String</span> <span class="cm-variable">message</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">init</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">message</span> <span class="cm-operator">=</span> <span class="cm-string">"Hello World!"</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">doGet</span>(<span class="cm-variable">HttpServletRequest</span> <span class="cm-variable">request</span>, <span class="cm-variable">HttpServletResponse</span> <span class="cm-variable">response</span>) <span class="cm-keyword">throws</span> <span class="cm-variable">IOException</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">response</span>.<span class="cm-variable">setContentType</span>(<span class="cm-string">"text/html"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">// Hello</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">PrintWriter</span> <span class="cm-variable">out</span> <span class="cm-operator">=</span> <span class="cm-variable">response</span>.<span class="cm-variable">getWriter</span>();</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"&lt;html&gt;&lt;body&gt;"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"&lt;h1&gt;"</span> <span class="cm-operator">+</span> <span class="cm-variable">message</span> <span class="cm-operator">+</span> <span class="cm-string">"&lt;/h1&gt;"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">public</span> <span class="cm-variable-3">void</span> <span class="cm-variable">destroy</span>() {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 788px;"></div><div class="CodeMirror-gutters" style="display: none; height: 788px;"></div></div></div></pre><h4><a name='header-n289' class='md-header-anchor '></a>6.3.4 @WebServlet注解常用属性</h4><blockquote><ul><li>name：Servlet名称（可选）</li><li>value：配置url路径，可以配置多个</li><li>UrlPatterns：同value，但不能同时使用</li><li>loadOnStartup：配置Servlet的创建时机，如果是0或正数在启动程序时创建，如果是负数，则访问时创建。数字越小优先级越高</li></ul></blockquote><h2><a name='header-n300' class='md-header-anchor '></a>7. Servlet应用</h2><h3><a name='header-n301' class='md-header-anchor '></a>7.1 request对象</h3><blockquote><p>在Servlet中用来处理客户端请求需要用doGet或doPost方法的request对象</p></blockquote><p><img src='https://img-blog.csdnimg.cn/a56be98ae7234f549639f9d2a1ec4d5f.png' alt='在这里插入图片描述' referrerPolicy='no-referrer' /></p><h4><a name='header-n305' class='md-header-anchor '></a>7.1.1 get和post区别</h4><blockquote><p>get请求：</p><ul><li>get提交的数据放在url之后，以?分割url和传输数据，参数之间以&amp;连接</li><li>get方式明文传递，数据量小，不安全</li><li>效率高，浏览器默认请求方式为Get请求</li><li>对应Servlet的方法是doGet</li></ul><p>post请求：</p><ul><li>post方法是把提交的数据放在HTTP包的Body中</li><li>密文传递数据，数据量大，安全</li><li>相对效率比get低</li><li>对应Servlet的方法是doPost</li></ul></blockquote><h4><a name='header-n327' class='md-header-anchor '></a>7.1.2 request主要方法</h4><figure><table><thead><tr><th>方法名</th><th>&nbsp;</th></tr></thead><tbody><tr><td>String getParameter(String name)</td><td>根据表单组件名称获取提交数据</td></tr><tr><td>void setCharacterEncoding(String charset)</td><td>指定每个请求的编码</td></tr></tbody></table></figure><h4><a name='header-n338' class='md-header-anchor '></a>7.1.3 request应用</h4><blockquote><p>Html页面</p></blockquote><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="html" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="html"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8.16406px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">&lt;!DOCTYPE html&gt;</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">html</span> <span class="cm-attribute">lang</span>=<span class="cm-string">"en"</span> <span class="cm-attribute">xmlns</span>=<span class="cm-string">"http://www.w3.org/1999/html"</span> <span class="cm-attribute">xmlns</span>=<span class="cm-string">"http://www.w3.org/1999/html"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">head</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">meta</span> <span class="cm-attribute">charset</span>=<span class="cm-string">"UTF-8"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">title</span><span class="cm-tag cm-bracket">&gt;</span>HTTP测试页面<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">title</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">head</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">body</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">h1</span><span class="cm-tag cm-bracket">&gt;</span>欢迎来到HTTP测试页面<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag">h1</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag cm-error">br</span><span class="cm-tag cm-bracket cm-error">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">form</span> <span class="cm-attribute">action</span>=<span class="cm-string">"register"</span> <span class="cm-attribute">method</span>=<span class="cm-string">"get"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">type</span>=<span class="cm-string">"text"</span> <span class="cm-attribute">name</span>=<span class="cm-string">"username"</span><span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag cm-error">br</span><span class="cm-tag cm-bracket cm-error">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">type</span>=<span class="cm-string">"password"</span> <span class="cm-attribute">name</span>=<span class="cm-string">"userpassword"</span><span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag cm-error">br</span><span class="cm-tag cm-bracket cm-error">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">type</span>=<span class="cm-string">"submit"</span> <span class="cm-attribute">value</span>=<span class="cm-string">"提交数据"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag cm-error">form</span><span class="cm-tag cm-bracket cm-error">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">form</span> <span class="cm-attribute">action</span>=<span class="cm-string">"register"</span> <span class="cm-attribute">method</span>=<span class="cm-string">"post"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">type</span>=<span class="cm-string">"text"</span> <span class="cm-attribute">name</span>=<span class="cm-string">"username"</span><span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag cm-error">br</span><span class="cm-tag cm-bracket cm-error">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">type</span>=<span class="cm-string">"password"</span> <span class="cm-attribute">name</span>=<span class="cm-string">"userpassword"</span><span class="cm-tag cm-bracket">/&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag cm-error">br</span><span class="cm-tag cm-bracket cm-error">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;</span><span class="cm-tag">input</span> <span class="cm-attribute">type</span>=<span class="cm-string">"submit"</span> <span class="cm-attribute">value</span>=<span class="cm-string">"提交数据"</span><span class="cm-tag cm-bracket">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag cm-error">form</span><span class="cm-tag cm-bracket cm-error">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag cm-error">body</span><span class="cm-tag cm-bracket cm-error">&gt;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tag cm-bracket">&lt;/</span><span class="cm-tag cm-error">html</span><span class="cm-tag cm-bracket cm-error">&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 720px;"></div><div class="CodeMirror-gutters" style="display: none; height: 720px;"></div></div></div></pre><blockquote><p>Servlet代码</p></blockquote><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="java" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="java"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8.16406px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">package</span> <span class="cm-def">com</span>.<span class="cm-variable">servlet</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">javax</span>.<span class="cm-variable">servlet</span>.<span class="cm-variable">ServletException</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">javax</span>.<span class="cm-variable">servlet</span>.<span class="cm-variable">annotation</span>.<span class="cm-variable">WebServlet</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">javax</span>.<span class="cm-variable">servlet</span>.<span class="cm-variable">http</span>.<span class="cm-variable">HttpServlet</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">javax</span>.<span class="cm-variable">servlet</span>.<span class="cm-variable">http</span>.<span class="cm-variable">HttpServletRequest</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">javax</span>.<span class="cm-variable">servlet</span>.<span class="cm-variable">http</span>.<span class="cm-variable">HttpServletResponse</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">java</span>.<span class="cm-variable">io</span>.<span class="cm-variable">IOException</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">@WebServlet</span>(<span class="cm-variable">value</span> <span class="cm-operator">=</span> <span class="cm-string">"/register"</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">RegisterServlet</span> <span class="cm-keyword">extends</span> <span class="cm-variable">HttpServlet</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">protected</span> <span class="cm-variable-3">void</span> <span class="cm-variable">doGet</span>(<span class="cm-variable">HttpServletRequest</span> <span class="cm-variable">req</span>, <span class="cm-variable">HttpServletResponse</span> <span class="cm-variable">resp</span>) <span class="cm-keyword">throws</span> <span class="cm-variable">ServletException</span>, <span class="cm-variable">IOException</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">//获取提交数据</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">String</span> <span class="cm-variable">username</span> <span class="cm-operator">=</span> <span class="cm-variable">req</span>.<span class="cm-variable">getParameter</span>(<span class="cm-string">"username"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">String</span> <span class="cm-variable">userpassword</span> <span class="cm-operator">=</span> <span class="cm-variable">req</span>.<span class="cm-variable">getParameter</span>(<span class="cm-string">"userpassword"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"账号："</span> <span class="cm-operator">+</span> <span class="cm-variable">username</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"密码："</span> <span class="cm-operator">+</span> <span class="cm-variable">userpassword</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-meta">@Override</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">protected</span> <span class="cm-variable-3">void</span> <span class="cm-variable">doPost</span>(<span class="cm-variable">HttpServletRequest</span> <span class="cm-variable">req</span>, <span class="cm-variable">HttpServletResponse</span> <span class="cm-variable">resp</span>) <span class="cm-keyword">throws</span> <span class="cm-variable">ServletException</span>, <span class="cm-variable">IOException</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">//对request对象设置统一编码</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">req</span>.<span class="cm-variable">setCharacterEncoding</span>(<span class="cm-string">"UTF-8"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">//获取提交数据</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">String</span> <span class="cm-variable">username</span> <span class="cm-operator">=</span> <span class="cm-variable">req</span>.<span class="cm-variable">getParameter</span>(<span class="cm-string">"username"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">String</span> <span class="cm-variable">userpassword</span> <span class="cm-operator">=</span> <span class="cm-variable">req</span>.<span class="cm-variable">getParameter</span>(<span class="cm-string">"userpassword"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"账号："</span> <span class="cm-operator">+</span> <span class="cm-variable">username</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-string">"密码："</span> <span class="cm-operator">+</span> <span class="cm-variable">userpassword</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1170px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1170px;"></div></div></div></pre><h4><a name='header-n345' class='md-header-anchor '></a>7.1.4 get/post请求乱码解决</h4><p><img src='https://img-blog.csdnimg.cn/b48ef781694345e884ad59808ee1304e.png' alt='在这里插入图片描述' referrerPolicy='no-referrer' /></p><p><img src='https://img-blog.csdnimg.cn/866b08f73dd44a129e8432e2b41b3997.png' alt='在这里插入图片描述' referrerPolicy='no-referrer' /></p><p><img src='https://img-blog.csdnimg.cn/aacb699c384547c1ac8cd5d8db770320.png' alt='在这里插入图片描述' referrerPolicy='no-referrer' /></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n349" mdtype="fences">//doPost编码设置
req.setCharacterEncoding("UTF-8");
</pre><h3><a name='header-n350' class='md-header-anchor '></a>7.2 response对象</h3><blockquote><p>response对象用于响应用户请求并向客户端输出信息</p></blockquote><p><img src='https://img-blog.csdnimg.cn/94f2abe1aed746849a2baa9e5f0c5d89.png' alt='在这里插入图片描述' referrerPolicy='no-referrer' /></p><h4><a name='header-n354' class='md-header-anchor '></a>7.2.1 response主要方法</h4><figure><table><thead><tr><th>方法名称</th><th>作用</th></tr></thead><tbody><tr><td>setHeader(name,value)</td><td>设置响应信息头</td></tr><tr><td>setContentType(String)</td><td>设置响应文件类型，响应式的编码格式</td></tr><tr><td>setCharacterEncoding(String)</td><td>设置服务端响应内容编码格式</td></tr><tr><td>getWriter()</td><td>获取字符输出流</td></tr></tbody></table></figure><h4><a name='header-n371' class='md-header-anchor '></a>7.2.2 response应用</h4><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n372" mdtype="fences" style="break-inside: unset;">    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        //获取提交数据
        String username = req.getParameter("username");
        String userpassword = req.getParameter("userpassword");
        System.out.println("账号：" + username);
        System.out.println("密码：" + userpassword);

        //响应数据给客户端
        //设置编码
        resp.setContentType("text/html;charset=UTF-8");
        PrintWriter respWriter = resp.getWriter();
        respWriter.println("响应数据成功");

    }
</pre><h4><a name='header-n373' class='md-header-anchor '></a>7.2.3 输出中文乱码解决方案</h4><blockquote><ul><li>设置服务器端响应的编码格式</li><li>设置客户端响应内容的头内容的文件类型及编码格式</li></ul></blockquote><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n380" mdtype="fences">response.setCharacterEncoding("utf-8");
response.setHeader("Content-type","text/html;charset=UTF-8");
</pre><blockquote><ul><li>同时设置服务端的编码格式和客户端响应的文件类型及响应时的编码格式</li></ul></blockquote><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n385" mdtype="fences">response.setContentType("text/html;charset=UTF-8");
</pre><h3><a name='header-n386' class='md-header-anchor '></a>7.3 综合案例（Servlet + Jdbc）</h3><h4><a name='header-n387' class='md-header-anchor '></a>7.3.1 导入maven依赖</h4><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="xml" contenteditable="false" cid="n388" mdtype="fences" style="break-inside: unset;">&lt;dependency&gt;
    &lt;groupId&gt;mysql&lt;/groupId&gt;
    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
    &lt;version&gt;8.0.28&lt;/version&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
    &lt;groupId&gt;com.alibaba&lt;/groupId&gt;
    &lt;artifactId&gt;druid&lt;/artifactId&gt;
    &lt;version&gt;1.1.9&lt;/version&gt;
&lt;/dependency&gt;

&lt;!-- https://mvnrepository.com/artifact/commons-dbutils/commons-dbutils --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;commons-dbutils&lt;/groupId&gt;
    &lt;artifactId&gt;commons-dbutils&lt;/artifactId&gt;
    &lt;version&gt;1.7&lt;/version&gt;
&lt;/dependency&gt;
</pre><h4><a name='header-n389' class='md-header-anchor '></a>7.3.2 数据库</h4><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="sql" contenteditable="false" cid="n390" mdtype="fences" style="break-inside: unset;">mysql&gt; select * from user;
+----+-----------+----------+-----------+-------------+
| id | name      | password | address   | phone       |
+----+-----------+----------+-----------+-------------+
|  1 | 李四      | 123456   | sichuan   | 12016352299 |
|  2 | 赵六      | 123456   | shanghai  | 65432189012 |
| 16 | 张三      | 136595   | Hebei     | 12365218900 |
| 40 | 张三      | 136595   | guangdong | 12685933840 |
| 41 | 张三丰    | 123456   | xinjiang  | 12345678901 |
| 42 | 王五      | 123456   | xizang    | 68965245871 |
| 43 | 李兰      | 123456   | jiangxi   | 54546532171 |
+----+-----------+----------+-----------+-------------+
7 rows in set (0.03 sec)

mysql&gt; desc user;
+----------+-------------+------+-----+---------+----------------+
| Field    | Type        | Null | Key | Default | Extra          |
+----------+-------------+------+-----+---------+----------------+
| id       | int         | NO   | PRI | NULL    | auto_increment |
| name     | varchar(10) | NO   |     | NULL    |                |
| password | varchar(15) | NO   |     | 123456  |                |
| address  | varchar(25) | YES  |     | NULL    |                |
| phone    | varchar(15) | YES  |     | NULL    |                |
+----------+-------------+------+-----+---------+----------------+
5 rows in set (0.03 sec)
</pre><h4><a name='header-n391' class='md-header-anchor '></a>7.3.3 配置文件</h4><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="properties" contenteditable="false" cid="n392" mdtype="fences"># 配置连接数据库的信息
driver=com.mysql.cj.jdbc.Driver
url=jdbc:mysql://localhost:3306/test?serverTimezone=GMT%2B8&amp;characterEncoding=utf-8&amp;useSSL=false
username=root
password=123456
initialSize=10
maxActive=20
minIdle=5
maxWait=3000
</pre><h4><a name='header-n393' class='md-header-anchor '></a>7.3.4 DbUtils</h4><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n394" mdtype="fences" style="break-inside: unset;">package com.utils;

import com.alibaba.druid.pool.DruidDataSource;
import com.alibaba.druid.pool.DruidDataSourceFactory;
import com.alibaba.druid.pool.DruidPooledConnection;

import java.io.IOException;
import java.io.InputStream;
import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.Properties;

public class DbUtils {

    private static DruidDataSource druidDataSource;
    private static final ThreadLocal&lt;Connection&gt; THREAD_LOCAL = new ThreadLocal&lt;&gt;();

    static {
        Properties properties = new Properties();
        InputStream resourceAsStream = DbUtils.class.getResourceAsStream("/database.properties");
        try {
            properties.load(resourceAsStream);
            druidDataSource = (DruidDataSource) DruidDataSourceFactory.createDataSource(properties);
        } catch (IOException e) {
            e.printStackTrace();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public static Connection getConnection(){
        Connection connection = THREAD_LOCAL.get();
        if (connection==null){
            try {
                connection = druidDataSource.getConnection();
            } catch (SQLException e) {
                e.printStackTrace();
            }
            THREAD_LOCAL.set(connection);
        }
        return connection;
    }

    public static void begin(){
         Connection connection = null;
         connection = getConnection();
        try {
            connection.setAutoCommit(false);
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    public static void commit(){
        Connection connection = null;
        connection = getConnection();
        try {
            connection.commit();
        } catch (SQLException e) {
            e.printStackTrace();
        } finally {
            closeAll(connection,null,null);
        }
    }

    public static void rollback(){
        Connection connection = null;
        connection = getConnection();
        try {
            connection.rollback();
        } catch (SQLException e) {
            e.printStackTrace();
        } finally {
            closeAll(connection,null,null);
        }
    }

    public static void closeAll(Connection connection, Statement statement, ResultSet resultSet){
        if (resultSet!=null) {
            try {
                resultSet.close();
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }
        if (statement != null) {
            try {
                statement.close();
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }
        if (connection!=null){
            try {
                connection.close();
            } catch (SQLException e) {
                e.printStackTrace();
            }
            THREAD_LOCAL.remove();
        }
    }
    
}
</pre><h4><a name='header-n395' class='md-header-anchor '></a>7.3.5 User</h4><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n396" mdtype="fences" style="break-inside: unset;">package com.entity;

public class User {
    private Integer id;
    private String name;
    private String password;
    private String address;
    private String phone;

    @Override
    public String toString() {
        return "User{" +
                "id=" + id +
                ", name='" + name + '\'' +
                ", password='" + password + '\'' +
                ", address='" + address + '\'' +
                ", phone='" + phone + '\'' +
                '}';
    }

    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public String getAddress() {
        return address;
    }

    public void setAddress(String address) {
        this.address = address;
    }

    public String getPhone() {
        return phone;
    }

    public void setPhone(String phone) {
        this.phone = phone;
    }

    public User() {
    }

    public User(Integer id, String name, String password, String address, String phone) {
        this.id = id;
        this.name = name;
        this.password = password;
        this.address = address;
        this.phone = phone;
    }
}
</pre><h4><a name='header-n397' class='md-header-anchor '></a>7.3.6 UserDao</h4><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n398" mdtype="fences">package com.dao;

import com.entity.User;

import java.util.List;

public interface UserDao {
    public int insert(User user);
    public int delete(String username);
    public int update(User user);
    public User select(String username);
    public List&lt;User&gt; selectAll();
}
</pre><h4><a name='header-n399' class='md-header-anchor '></a>7.3.7 UserDaoImpl</h4><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n400" mdtype="fences" style="break-inside: unset;">package com.dao.impl;

import com.dao.UserDao;
import com.entity.User;
import com.utils.DbUtils;
import org.apache.commons.dbutils.QueryRunner;
import org.apache.commons.dbutils.handlers.BeanHandler;
import org.apache.commons.dbutils.handlers.BeanListHandler;

import java.sql.SQLException;
import java.util.List;

public class UserDaoImpl implements UserDao {

    private QueryRunner queryRunner = new QueryRunner();

    @Override
    public int insert(User user) {
        return 0;
    }

    @Override
    public int delete(String username) {
        return 0;
    }

    @Override
    public int update(User user) {
        return 0;
    }

    @Override
    public User select(String username) {
        try {
            User user = queryRunner.query(DbUtils.getConnection(), "select * from user where name = ?;", new BeanHandler&lt;User&gt;(User.class), username);
            return user;
        } catch (SQLException e) {
            e.printStackTrace();
        }
        return null;
    }

    @Override
    public List&lt;User&gt; selectAll() {
        try {
            List&lt;User&gt; userList = queryRunner.query(DbUtils.getConnection(), "select * from user;", new BeanListHandler&lt;User&gt;(User.class));
            return userList;
        } catch (SQLException e) {
            e.printStackTrace();
        }
        return null;
    }
}
</pre><h4><a name='header-n401' class='md-header-anchor '></a>7.3.8 UserService</h4><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n402" mdtype="fences">package com.service;

import com.entity.User;

import java.util.List;

public interface UserService {
    public User login(String username, String password);
    public List&lt;User&gt; showAllUser();
}
</pre><h4><a name='header-n403' class='md-header-anchor '></a>7.3.9 UserServiceImpl</h4><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n404" mdtype="fences" style="break-inside: unset;">package com.service.impl;

import com.dao.UserDao;
import com.dao.impl.UserDaoImpl;
import com.entity.User;
import com.service.UserService;
import com.utils.DbUtils;

import java.util.List;

public class UserServiceImpl implements UserService {

    private UserDao userDao = new UserDaoImpl();

    @Override
    public User login(String username, String password) {
        User result = null;
        try {
            //开启事务
            DbUtils.begin();
            User user = userDao.select(username);
            if (user != null) {
                if (user.getPassword().equals(password)) {
                    result = user;
                }
            }
            DbUtils.commit();
        } catch (Exception e){
            DbUtils.rollback();
            e.printStackTrace();
        }
        return result;
    }

    @Override
    public List&lt;User&gt; showAllUser() {
        List&lt;User&gt; userList = null;
        try {
            DbUtils.begin();
            userList = userDao.selectAll();
            DbUtils.commit();
        } catch (Exception e){
            DbUtils.rollback();
            e.printStackTrace();
        }
        return userList;
    }
}
</pre><h4><a name='header-n405' class='md-header-anchor '></a>7.3.10 Html页面</h4><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="html" contenteditable="false" cid="n406" mdtype="fences" style="break-inside: unset;">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
    &lt;head&gt;
        &lt;meta charset="UTF-8"&gt;
        &lt;title&gt;登陆页面&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;

        &lt;h1&gt;用户登录页面&lt;/h1&gt;
        &lt;/br&gt;
    &lt;form action="/JavaWebProject_war_exploded/login" method="get"&gt;
        &lt;input type="text" name="username"/&gt;
        &lt;/br&gt;
    &lt;input type="password" name="password"/&gt;
    &lt;/br&gt;
&lt;input type="submit" value="登陆"&gt;
&lt;/form&gt;

&lt;/body&gt;
&lt;/html&gt;
</pre><h4><a name='header-n407' class='md-header-anchor '></a>7.3.11 LoginServlet</h4><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n408" mdtype="fences" style="break-inside: unset;">package com.servlet;

import com.entity.User;
import com.service.UserService;
import com.service.impl.UserServiceImpl;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;
import java.io.PrintWriter;

@WebServlet(value = "/login")
public class LoginServlet extends HttpServlet {

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        req.setCharacterEncoding("UTF-8");
        resp.setContentType("text/html;charset=UTF-8");
        //收参
        String username = req.getParameter("username");
        String password = req.getParameter("password");
        //调用业务逻辑
        UserService userService = new UserServiceImpl();
        User user = userService.login(username, password);
        //处理结果
        PrintWriter out = resp.getWriter();
        if(user!=null){
            //响应给客户端结果页面，显示登陆成功
            out.println("&lt;html&gt;&lt;body&gt;");
            out.println("&lt;h1&gt;" + "登陆成功" + "&lt;/h1&gt;");
            out.println("&lt;h1&gt;" + "登陆成功" + "&lt;/h1&gt;");
            out.println("&lt;h1&gt;" + "登陆成功" + "&lt;/h1&gt;");
            out.println("&lt;/body&gt;&lt;/html&gt;");
        } else {
            //响应登陆失败
            out.println("&lt;html&gt;&lt;body&gt;");
            out.println("&lt;h1&gt;" + "登陆失败" + "&lt;/h1&gt;");
            out.println("&lt;h1&gt;" + "登陆失败" + "&lt;/h1&gt;");
            out.println("&lt;h1&gt;" + "登陆失败" + "&lt;/h1&gt;");
            out.println("&lt;/body&gt;&lt;/html&gt;");
        }
    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        doGet(req, resp);
    }
}
</pre><h4><a name='header-n409' class='md-header-anchor '></a>7.3.12 ShowAllUserServlet</h4><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n410" mdtype="fences" style="break-inside: unset;">package com.servlet;

import com.entity.User;
import com.service.impl.UserServiceImpl;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.List;

@WebServlet("/showall")
public class ShowAllUserServlet extends HttpServlet {

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        resp.setContentType("text/html;charset=utf-8");
        UserServiceImpl userService = new UserServiceImpl();
        List&lt;User&gt; userList = userService.showAllUser();
        PrintWriter printWriter = resp.getWriter();
        if (userList!=null){
            printWriter.println("&lt;html&gt;");
            printWriter.println("&lt;head&gt;");
            printWriter.println("&lt;meta charset='utf-8'&gt;");
            printWriter.println("&lt;title&gt;显示所有数据信息&lt;/title&gt;");
            printWriter.println("&lt;/head&gt;");
            printWriter.println("&lt;body&gt;");
            printWriter.println("&lt;h1&gt;" + "数据展示" + "&lt;/h1&gt;");
            printWriter.println("&lt;h1&gt;" + "数据展示" + "&lt;/h1&gt;");
            printWriter.println("&lt;h1&gt;" + "数据展示" + "&lt;/h1&gt;");
            printWriter.println("&lt;table border='1'&gt;");
            printWriter.println("   &lt;tr&gt;");
            printWriter.println("       &lt;td&gt;username&lt;/td&gt;");
            printWriter.println("       &lt;td&gt;password&lt;/td&gt;");
            printWriter.println("       &lt;td&gt;phone&lt;/td&gt;");
            printWriter.println("       &lt;td&gt;address&lt;/td&gt;");
            printWriter.println("   &lt;/tr&gt;");
            for(User user : userList){
                printWriter.println("   &lt;tr&gt;");
                printWriter.println("       &lt;td&gt;"+user.getName()+"&lt;/td&gt;");
                printWriter.println("       &lt;td&gt;"+user.getPassword()+"&lt;/td&gt;");
                printWriter.println("       &lt;td&gt;"+user.getPhone()+"&lt;/td&gt;");
                printWriter.println("       &lt;td&gt;"+user.getAddress()+"&lt;/td&gt;");
                printWriter.println("   &lt;/tr&gt;");
            }
            printWriter.println("&lt;/table&gt;");
            printWriter.println("&lt;/body&gt;");
            printWriter.println("&lt;/html&gt;");
        } else{
            //响应登陆失败
            printWriter.println("&lt;html&gt;&lt;body&gt;");
            printWriter.println("&lt;h1&gt;" + "无数据" + "&lt;/h1&gt;");
            printWriter.println("&lt;h1&gt;" + "无数据" + "&lt;/h1&gt;");
            printWriter.println("&lt;h1&gt;" + "无数据" + "&lt;/h1&gt;");
            printWriter.println("&lt;/body&gt;&lt;/html&gt;");
        }
    }
}
</pre><h2><a name='header-n411' class='md-header-anchor '></a>8. 转发和重定向</h2><h3><a name='header-n412' class='md-header-anchor '></a>8.1 问题</h3><blockquote><p>在案例中，调用业务逻辑和显示结果页面都在同一个Servlet中，产生设计问题</p><ul><li>不符合单一职能原则</li><li>不利于后续维护</li></ul><p>将业务逻辑和显示结果分开</p></blockquote><p><img src='https://img-blog.csdnimg.cn/7ff5e027d83843b4b6d7425973e22eac.png' alt='在这里插入图片描述' referrerPolicy='no-referrer' /></p><h4><a name='header-n422' class='md-header-anchor '></a>8.1.1 业务、显示分离</h4><p><img src='https://img-blog.csdnimg.cn/2dd4c1499da240efadbe92eb2a40769f.png' alt='在这里插入图片描述' referrerPolicy='no-referrer' /></p><h4><a name='header-n424' class='md-header-anchor '></a>8.1.2 ShowAllServlet</h4><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n425" mdtype="fences" style="break-inside: unset;">package com.servlet;

import com.entity.User;
import com.service.impl.UserServiceImpl;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.List;

@WebServlet("/showall")
public class ShowAllUserServlet extends HttpServlet {

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        resp.setContentType("text/html;charset=utf-8");
        UserServiceImpl userService = new UserServiceImpl();
        List&lt;User&gt; userList = userService.showAllUser();
        PrintWriter printWriter = resp.getWriter();
        if (userList!=null){
            printWriter.println("&lt;html&gt;");
            printWriter.println("&lt;head&gt;");
            printWriter.println("&lt;meta charset='utf-8'&gt;");
            printWriter.println("&lt;title&gt;显示所有数据信息&lt;/title&gt;");
            printWriter.println("&lt;/head&gt;");
            printWriter.println("&lt;body&gt;");
            printWriter.println("&lt;h1&gt;" + "数据展示" + "&lt;/h1&gt;");
            printWriter.println("&lt;h1&gt;" + "数据展示" + "&lt;/h1&gt;");
            printWriter.println("&lt;h1&gt;" + "数据展示" + "&lt;/h1&gt;");
            printWriter.println("&lt;table border='1'&gt;");
            printWriter.println("   &lt;tr&gt;");
            printWriter.println("       &lt;td&gt;username&lt;/td&gt;");
            printWriter.println("       &lt;td&gt;password&lt;/td&gt;");
            printWriter.println("       &lt;td&gt;phone&lt;/td&gt;");
            printWriter.println("       &lt;td&gt;address&lt;/td&gt;");
            printWriter.println("   &lt;/tr&gt;");
            for(User user : userList){
                printWriter.println("   &lt;tr&gt;");
                printWriter.println("       &lt;td&gt;"+user.getName()+"&lt;/td&gt;");
                printWriter.println("       &lt;td&gt;"+user.getPassword()+"&lt;/td&gt;");
                printWriter.println("       &lt;td&gt;"+user.getPhone()+"&lt;/td&gt;");
                printWriter.println("       &lt;td&gt;"+user.getAddress()+"&lt;/td&gt;");
                printWriter.println("   &lt;/tr&gt;");
            }
            printWriter.println("&lt;/table&gt;");
            printWriter.println("&lt;/body&gt;");
            printWriter.println("&lt;/html&gt;");
        } else{
            //响应登陆失败
            printWriter.println("&lt;html&gt;&lt;body&gt;");
            printWriter.println("&lt;h1&gt;" + "无数据" + "&lt;/h1&gt;");
            printWriter.println("&lt;h1&gt;" + "无数据" + "&lt;/h1&gt;");
            printWriter.println("&lt;h1&gt;" + "无数据" + "&lt;/h1&gt;");
            printWriter.println("&lt;/body&gt;&lt;/html&gt;");
        }


    }

}
</pre><h4><a name='header-n426' class='md-header-anchor '></a>8.1.3 ShowAllUserController</h4><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n427" mdtype="fences" style="break-inside: unset;">  package com.servlet;

import com.entity.User;
import com.service.impl.UserServiceImpl;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;
import java.util.List;


@WebServlet("/showallusercontroller")
public class ShowAllUserController extends HttpServlet {

    //调用业务逻辑功能

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        UserServiceImpl userService = new UserServiceImpl();
        List&lt;User&gt; userList = userService.showAllUser();
        //存储数据
        req.setAttribute("users",userList);
        //跳转到JSP
        req.getRequestDispatcher("/showalluserjsp").forward(req,resp);
    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        doGet(req, resp);
    }
}

</pre><h4><a name='header-n428' class='md-header-anchor '></a>8.1.4 ShowAllUserJSP</h4><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n429" mdtype="fences" style="break-inside: unset;">package com.servlet;

import com.entity.User;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.List;


@WebServlet("/showalluserjsp")
public class ShowAllUserJSP extends HttpServlet {

    //获取数据
    //显示结果
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        resp.setContentType("text/html;charset=utf-8");
        List&lt;User&gt; userList = (List&lt;User&gt;) req.getAttribute("users");
        PrintWriter printWriter = resp.getWriter();
        if (userList!=null){
            printWriter.println("&lt;html&gt;");
            printWriter.println("&lt;head&gt;");
            printWriter.println("&lt;meta charset='utf-8'&gt;");
            printWriter.println("&lt;title&gt;显示所有数据信息&lt;/title&gt;");
            printWriter.println("&lt;/head&gt;");
            printWriter.println("&lt;body&gt;");
            printWriter.println("&lt;h1&gt;" + "数据展示" + "&lt;/h1&gt;");
            printWriter.println("&lt;h1&gt;" + "数据展示" + "&lt;/h1&gt;");
            printWriter.println("&lt;h1&gt;" + "数据展示" + "&lt;/h1&gt;");
            printWriter.println("&lt;table border='1'&gt;");
            printWriter.println("   &lt;tr&gt;");
            printWriter.println("       &lt;td&gt;username&lt;/td&gt;");
            printWriter.println("       &lt;td&gt;password&lt;/td&gt;");
            printWriter.println("       &lt;td&gt;phone&lt;/td&gt;");
            printWriter.println("       &lt;td&gt;address&lt;/td&gt;");
            printWriter.println("   &lt;/tr&gt;");
            for(User user : userList){
                printWriter.println("   &lt;tr&gt;");
                printWriter.println("       &lt;td&gt;"+user.getName()+"&lt;/td&gt;");
                printWriter.println("       &lt;td&gt;"+user.getPassword()+"&lt;/td&gt;");
                printWriter.println("       &lt;td&gt;"+user.getPhone()+"&lt;/td&gt;");
                printWriter.println("       &lt;td&gt;"+user.getAddress()+"&lt;/td&gt;");
                printWriter.println("   &lt;/tr&gt;");
            }
            printWriter.println("&lt;/table&gt;");
            printWriter.println("&lt;/body&gt;");
            printWriter.println("&lt;/html&gt;");
        } else{
            //响应登陆失败
            printWriter.println("&lt;html&gt;&lt;body&gt;");
            printWriter.println("&lt;h1&gt;" + "无数据" + "&lt;/h1&gt;");
            printWriter.println("&lt;h1&gt;" + "无数据" + "&lt;/h1&gt;");
            printWriter.println("&lt;h1&gt;" + "无数据" + "&lt;/h1&gt;");
            printWriter.println("&lt;/body&gt;&lt;/html&gt;");
        }

    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        doGet(req, resp);
    }
}
</pre><h3><a name='header-n430' class='md-header-anchor '></a>8.2 转发</h3><blockquote><p>转发的作用在服务器端，将请求发送给服务器上的其他资源，以共同完成一次请求的处理</p></blockquote><h4><a name='header-n433' class='md-header-anchor '></a>8.2.1 页面跳转</h4><blockquote><p>在调用业务逻辑的Servlet中，编写以下代码</p><ul><li>request.getRequestDispatcher(&quot;/目标URL-pattern&quot;),forward(request,response);</li><li><img src='https://img-blog.csdnimg.cn/d36a5c8b1e094c99afbb4c6b78c76b3e.png' alt='在这里插入图片描述' referrerPolicy='no-referrer' /></li><li>使用forward跳转时，是在服务器内部跳转，地址栏不发生变化，属于同一次请求</li></ul></blockquote><h4><a name='header-n443' class='md-header-anchor '></a>8.2.2 数据传递</h4><blockquote><p>forward表示一次请求，是在服务器内部跳转，可共享同一次request作用域中的数据</p><ul><li><p>request作用域：拥有存储数据的空间，作用范围是一次请求有效（一次请求可以经过多次转发）</p><ul><li>可以将数据存入request后，在一次请求过程中的任何位置进行获取</li><li>可以传递任何数据（基本数据类型，对象，数组，集合等）</li></ul></li><li><p>存数据：request.setAttribute(key,value);</p><ul><li>以键值对形式存储在request作用域中，key为String，value为Object</li></ul></li><li><p>取数据：request.getAttribute(key);</p><ul><li>通过String类型的key访问Object类型的value</li></ul></li></ul></blockquote><h4><a name='header-n464' class='md-header-anchor '></a>8.2.3 转发特点</h4><blockquote><ul><li>转发是服务器行为</li><li>转发是浏览器只做了一次访问请求</li><li>转发浏览器地址不变</li><li>转发两次跳转之间传输的信息不会丢失，所以可以通过request进行数据的传递</li><li>转发只能将请求转发给同一个Web应用中的组件</li></ul></blockquote><h3><a name='header-n477' class='md-header-anchor '></a>8.3 重定向</h3><blockquote><p>重定向作用在客户端，客户端将请求发送给服务器后，服务器响应给客户端一个新的请求地址，客户端重新发送新请求</p></blockquote><h4><a name='header-n480' class='md-header-anchor '></a>8.3.1 页面跳转</h4><blockquote><p>在调用业务逻辑的Servlet中，编写以下代码</p><ul><li>response.sendRedirect(&quot;目标URI&quot;);</li></ul></blockquote><ul><li>URL：统一资源标识符，用来表示服务器中定位一个资源，资源在web项目中的路径(/project/source)</li></ul><p><img src='https://img-blog.csdnimg.cn/d3025126c6584794b0f6303370e59502.png' alt='在这里插入图片描述' referrerPolicy='no-referrer' /></p><ul><li>在使用redirect跳转时，是在客户端跳转，地址栏发生变化，属于多次请求</li></ul><h4><a name='header-n493' class='md-header-anchor '></a>8.3.2 数据传递</h4><blockquote><p>sendRedirect跳转时，地址栏改变，代表客户端重新发送的请求，属于两次请求</p><ul><li>response没有作用域，两次request请求中的数据无法共享</li><li>传递数据：通过URL的拼接进行数据传递（&quot;/WebProject/b?username=tom&quot;）</li><li>获取数据：request.getParameter(&quot;username&quot;);</li></ul></blockquote><h4><a name='header-n503' class='md-header-anchor '></a>8.3.3 重定向的特点</h4><blockquote><ul><li>重定向是客户端行为</li><li>重定向是浏览器做了至少两次的访问请求</li><li>重定向浏览器地址改变</li><li>重定向两次跳转之间传输的信息会丢失（request范围）</li><li>重定向可以指向任何的资源，包括当前应用程序中的其他资源，同一个站点的其他应用程序中的资源，其他站点的资源</li></ul></blockquote><h3><a name='header-n516' class='md-header-anchor '></a>8.4 总结</h3><blockquote><p>当两个Servlet需要传递数据时，选择forward转发，不建议使用sendRedirect进行传递</p></blockquote><h2><a name='header-n519' class='md-header-anchor '></a>9. Servlet生命周期</h2><h3><a name='header-n520' class='md-header-anchor '></a>9.1 生命周期的四个阶段</h3><h4><a name='header-n521' class='md-header-anchor '></a>9.1.1 实例化</h4><blockquote><p>当用户第一次访问Servlet时，由容器调用Servlet的构造器创建具体的Servlet对象，也可以在容器启动之后立刻创建实例。</p><p><load-on-startup>1</load-on-startup></p><ul><li>注意：只执行一次</li></ul></blockquote><h4><a name='header-n528' class='md-header-anchor '></a>9.1.2 初始化</h4><blockquote><p>在初始化阶段，init()方法会被调用，这个方法在javax.servlet.Servlet接口中定义，其中，方法以一个ServletConfig类型的对象作为参数</p><ul><li>注意：init()只被执行一次</li></ul></blockquote><h4><a name='header-n534' class='md-header-anchor '></a>9.1.3 服务</h4><blockquote><p>当客户端有一个请求时，容器就会将请求ServletRequest与响应ServletResponse对象转给Servlet，以参数的形式传给service方法</p><ul><li>此方法会执行多次</li></ul></blockquote><h4><a name='header-n540' class='md-header-anchor '></a>9.1.4 销毁</h4><blockquote><p>当Servlet容器停止或重新启动都会引起销毁Servlet对象并调用destroy方法</p></blockquote><h4><a name='header-n543' class='md-header-anchor '></a>9.1.5 Servlet执行流程</h4><p><img src='https://img-blog.csdnimg.cn/bd5d192ff90b481cb1c372c42c803e5f.png' alt='在这里插入图片描述' referrerPolicy='no-referrer' /></p><h4><a name='header-n545' class='md-header-anchor '></a>9.1.6 代码</h4><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n546" mdtype="fences" style="break-inside: unset;">package com.servlet;

import javax.servlet.*;
import javax.servlet.annotation.WebServlet;
import java.io.IOException;

@WebServlet("/lifeservlet")
public class LifeServlet implements Servlet {
    
    public LifeServlet(){
        System.out.println("初始化");
    }
    
    @Override
    public void init(ServletConfig servletConfig) throws ServletException {
        System.out.println("实例化");
    }

    @Override
    public ServletConfig getServletConfig() {
        return null;
    }

    @Override
    public void service(ServletRequest servletRequest, ServletResponse servletResponse) throws ServletException, IOException {
        System.out.println("服务执行");
    }

    @Override
    public String getServletInfo() {
        return null;
    }

    @Override
    public void destroy() {
        System.out.println("销毁");
    }
}
</pre><h2><a name='header-n547' class='md-header-anchor '></a>10. Servlet特性</h2><h3><a name='header-n548' class='md-header-anchor '></a>10.1 线程安全问题</h3><blockquote><p>Servlet在访问之后，会执行实例化操作，创建一个Servlet对象，而我们Tomcat容器可以同时多个线程并发访问同一个Servlet，如果在方法中对成员变量做修改操作，就会有线程安全的问题</p></blockquote><h3><a name='header-n551' class='md-header-anchor '></a>10.2 如何保证线程安全</h3><blockquote><ul><li><p>synchronized</p><ul><li>将存在线程安全问题的代码放到同步代码块中</li></ul></li><li><p>实现SingleThreadModel接口</p><ul><li>servlet实现SingleThreadModel接口后，每个线程都会创建servlet实例，这样每个客户端请求就不存在共享资源的问题，但是servlet响应客户端请求的效率太低，已被淘汰</li></ul></li><li><p>尽可能使用局部变量</p></li></ul></blockquote><h2><a name='header-n566' class='md-header-anchor '></a>11. 状态管理</h2><h3><a name='header-n567' class='md-header-anchor '></a>11.1 问题</h3><blockquote><ul><li>HTTP协议是无状态的，不能保存每次提交的信息</li><li>如果用户发来一个新的请求，服务器无法知道是否与上次的请求有联系</li><li>对应那些需要多次提交数据才能完成的Web操作，存在问题</li></ul></blockquote><h3><a name='header-n576' class='md-header-anchor '></a>11.2 概念</h3><blockquote><p>将浏览器与web服务器之间多次交互当作一个整体来处理，并且将多次交互所涉及的数据（即状态）保存下来</p></blockquote><h3><a name='header-n579' class='md-header-anchor '></a>11.3 状态管理分类</h3><blockquote><ul><li>客户端状态管理技术：将状态保存在客户端，代表性的是Cookie技术</li><li>服务器状态管理技术：将状态保存在服务器端，代表性的是session技术（服务器传递sessionID时需要使用Cookie的方式）</li></ul></blockquote><h2><a name='header-n586' class='md-header-anchor '></a>12. Cookie的使用</h2><h3><a name='header-n587' class='md-header-anchor '></a>12.1 Cookie概念</h3><blockquote><ul><li>Cookie是在浏览器访问Web服务器的某个资源时，由Web服务器在HTTP响应消息头中附带传送给浏览器的一小段数据</li><li>一旦Web浏览器保存了某个Cookie，那么它在以后每次访问该Web服务器时，都应在HTTP请求头中将这个Cookie回传给Web服务器</li><li>一个Cookie注意由标识该 信息的名称(name)和值(value)组成</li></ul></blockquote><p><img src='https://img-blog.csdnimg.cn/40cc26d951374ae6bbef99a9695a4ec6.png' alt='在这里插入图片描述' referrerPolicy='no-referrer' /></p><h3><a name='header-n597' class='md-header-anchor '></a>12.2 创建Cookie</h3><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n598" mdtype="fences">//服务端创建Cookie对象
Cookie cookie = new Cookie("username","zhry");
//设置Cookie访问路径
cookie.setPath("/webs");
cookie.setMaxAge(-1);//内存存储，取值有三种：&gt;0有效期，单位秒；=0浏览器关闭；&lt;0内存存储，默认-1
//将Cookie响应给客户端
resp.addCookie(cookie);
</pre><h3><a name='header-n599' class='md-header-anchor '></a>12.3 获取Cookie</h3><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n600" mdtype="fences">//通过request对象获取所有的cookie
Cookie[] cookies = req.getCookies();
//循环遍历cookies
if(cookies!=null){
    for(Cookie cookie :cookies){
        system.out.println(cookie.getName() + " : " + cookie.getValue()); 
    }
}
</pre><h3><a name='header-n601' class='md-header-anchor '></a>12.4 修改Cookie</h3><blockquote><p>只需要保证Cookie的名和路径一致即可修改</p></blockquote><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n604" mdtype="fences">//修改Cookie
Cookie ck = new Cookie("code",code);
ck.setPath("/*webs");//设置Cookie的路径
ck.setMaxAge(-1);//内存存储
response.addCookie(ck);//让浏览器添加Cookie
</pre><blockquote><p>注意：如果改变Cookie的name和有效路径会新建cookie，而改变cookie的值，有效期会覆盖原有的cookie</p></blockquote><h3><a name='header-n607' class='md-header-anchor '></a>12.5 Cookie编码与解码</h3><blockquote><p>Cookie默认不支持中文，只能包含ASCII字符，所以Cookie需要对Unicode字符进行编码，否则会出现乱码问题</p><ul><li>编码可以使用java.net.URLEncoder类和encode(String str,String encoding)方法</li><li>解码可以使用java.net.URLDecoder类和decode(String str,String encoding)方法</li></ul></blockquote><h4><a name='header-n615' class='md-header-anchor '></a>12.5.1 创建带中文Cookie</h4><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n616" mdtype="fences">//使用中文的Cookie，name与value都使用UTF-8编码
Cookie cookie = new Cookie(
	URLEncoder.encode("姓名","UTF-8");
    URLEncoder.encode("张三","UTF-8");
);
//发送到客户端
resp.addCookie(cookie);
</pre><h4><a name='header-n617' class='md-header-anchor '></a>12.5.2 读取带中文Cookie</h4><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n618" mdtype="fences">if(req.getCookies()!=null){
    for(Cookie cookie : req.getCookies()){
        String cookieName = URLDecoder.decode(cookie.getName(),"UTF-8");
        String cookieValue = URLDecoder.decode(cookie.getValue(),"UTF-8");
        out.println(cookieName + "=");
        out.println(cookieValue + ":&lt;/br&gt;");
    }
} else{
    out.println("Cookie已经写入客户端，请刷新页面。");
}
</pre><h3><a name='header-n619' class='md-header-anchor '></a>12.6 Cookie优缺点</h3><h4><a name='header-n620' class='md-header-anchor '></a>12.6.1 优点</h4><blockquote><ul><li>可配置到期规则</li><li>简单性：Cookie是一种基于文本的轻量级结构，包含简单的键值对</li><li>数据持久性：Cookie默认在过期之前是可以一直存在客户端浏览器上的</li></ul></blockquote><h4><a name='header-n629' class='md-header-anchor '></a>12.6.2 缺点</h4><blockquote><ul><li>大小受到限制：大多数浏览器对Cookie大小有4K、8K字节的限制</li><li>用户配置为禁用：有些用户禁用了浏览器或客户端设备接收Cookie的能力，因此限制了这一功能</li><li>潜在的安全风险：Cookie可能会被篡改，会对安全性造成潜在风险或导致依赖于Cookie的应用程序失败</li></ul></blockquote><h2><a name='header-n638' class='md-header-anchor '></a>13. 三层架构</h2><blockquote><p>Spring+SpringMVC+Mybatis：</p><ul><li>enums：枚举类</li><li>pojo：实体类</li><li>config：配置类</li><li>mapper：（数据访问层，dao）UserMapper接口，与配置文件UserMapper在Mybatis使用</li><li>service：（服务层，调dao）：UseService接口 + UserServiceImpl实现类（impl）</li><li>controller：（控制层，调service）：xxxController实现类</li><li>view：表示层</li><li>servlet：xxxController调用业务逻辑，xxxJSP显示页面结果</li></ul></blockquote><blockquote><ul><li>表示层：xxxView，收集用户数据和需求，展示信息</li><li>业务逻辑层：xxxServiceImpl，数据加工处理，调用DAO完成业务实现，控制事务</li><li>数据访问层：xxxDaoImpl，向业务层提供数据，将业务层加工后的数据同步到数据库</li></ul><blockquote><ul><li><strong>业务逻辑层和数据访问层使用&quot;接口引用指向实现类对象&quot;思想</strong></li></ul></blockquote></blockquote><p><img src='https://img-blog.csdnimg.cn/a973f6515e8542d1b0e04b1163bf2bcf.png' alt='在这里插入图片描述' referrerPolicy='no-referrer' /></p><h2><a name='header-n671' class='md-header-anchor '></a>14. Session对象</h2><h3><a name='header-n672' class='md-header-anchor '></a>14.1 Session概述</h3><blockquote><ul><li>Session用于记录用户的状态，Session指的是在一段时间内，单个客户端与Web服务器的一连串相关的交互过程</li><li>在一个Session中，客户可能会多次请求访问同一个资源，也有可能请求访问各种不同的服务器资源</li></ul></blockquote><h3><a name='header-n679' class='md-header-anchor '></a>14.2 Session原理</h3><blockquote><ul><li>服务器会为每一次会话分配一个Session对象</li><li>同一个浏览器发起的多次请求，同属于一次会话（Session）</li><li>首次使用到Session时，服务器会自动创建Session，并创建Cookie存储SessionId发送会客户端</li><li>Session是由服务端创建的</li></ul></blockquote><h3><a name='header-n690' class='md-header-anchor '></a>14.2 Session使用</h3><blockquote><ul><li><p>Session作用域：拥有存储数据的空间，作用范围是一次会话有效</p><ul><li>一次会话是使用同一浏览器发送的多次请求，一旦浏览器关闭，则结束会话</li><li>可以将数据存入Session中，在一次会话的任意位置进行获取</li><li>可传递任何数据（基本数据类型、对象、集合、数组）</li></ul></li></ul></blockquote><h4><a name='header-n702' class='md-header-anchor '></a>14.2.1 获取Session</h4><blockquote><p>session是服务器端自动创建的，通过request对象获取</p></blockquote><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n705" mdtype="fences">//获取Session对象
HttpSession session = req.getSession();
System.out.println("Id" + session.getId());//唯一标记
</pre><h4><a name='header-n706' class='md-header-anchor '></a>14.2.2 Session保存数据</h4><blockquote><p>setAttribute(属性名，Object)保存数据到session中</p></blockquote><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n709" mdtype="fences">session.setAttribute("key",value);//以键值对形式存在session作用域中
</pre><h4><a name='header-n710' class='md-header-anchor '></a>14.2.3 Session获取数据</h4><blockquote><p>getAttribute(属性名);获取session中的数据</p></blockquote><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n713" mdtype="fences">session.getAttribute("key");//通过String类型的key访问Object类型的value
</pre><h4><a name='header-n714' class='md-header-anchor '></a>14.2.4 Session移除数据</h4><blockquote><p>removeAttribute(属性名);从session中删除数据</p></blockquote><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n717" mdtype="fences">session.removeAttribute("key");//通过键移除session作用域中的值
</pre><h3><a name='header-n718' class='md-header-anchor '></a>14.4 Session与Request的应用区别</h3><blockquote><ul><li>request是一次请求有效，请求改变，则request改变</li><li>session是一次会话有效，浏览器改变，则session改变</li></ul></blockquote><h4><a name='header-n725' class='md-header-anchor '></a>14.4.1 Session应用</h4><p><code>SessionServlet</code></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n727" mdtype="fences" style="break-inside: unset;">package com.servlet;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.annotation.*;
import java.io.IOException;

@WebServlet(name = "SessionServlet", value = "/SessionServlet")
public class SessionServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        //通过request对象获取session对象
        HttpSession session = request.getSession();
        //使用session保存数据
        session.setAttribute("username","张三");
        session.setAttribute("password","123456");
        response.sendRedirect("/JavaWebProject_war_exploded/GetValueServlet");
        System.out.println(session.getId());

    }

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        doGet(request,response);
    }
}
</pre><p><code>GetValueServlet</code></p><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n729" mdtype="fences" style="break-inside: unset;">package com.servlet;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.annotation.*;
import java.io.IOException;

@WebServlet(name = "GetValueServlet", value = "/GetValueServlet")
public class GetValueServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        doPost(request,response);
    }

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        //通过request对象获取Session对象
        HttpSession session = request.getSession();
        String password = (String) request.getAttribute("password");
        String username = (String) session.getAttribute("username");
        System.out.println("从session中获取用户名：" + username);
        System.out.println("从request中获取密码：" + password);
    }
}
</pre><h3><a name='header-n730' class='md-header-anchor '></a>14.5 Session的生命周期</h3><blockquote><ul><li><p>开始：第一次使用Session的请求产生，则创建Session</p></li><li><p>结束：</p><ul><li><p>浏览器关闭则失效</p></li><li><p>Session超时则失效</p><ul><li>session.setMaxInactiveInterval(seconds);//设置最大有效时间(s)</li></ul></li><li><p>手动销毁则失效</p><ul><li>session.invalidate();//退出登录，注销</li></ul></li></ul></li></ul></blockquote><h3><a name='header-n750' class='md-header-anchor '></a>14.6 浏览器禁用Cookie解决方案</h3><h4><a name='header-n751' class='md-header-anchor '></a>14.6.1 浏览器禁用Cookie后果</h4><blockquote><p>服务器在默认情况下，会使用Cookie方式将sessionID发送给浏览器，如果用户进制Cookie，则sessionID不会被浏览器保存，此时，服务器可能使用如URL重写这样的方式来发送sessionID</p></blockquote><h4><a name='header-n754' class='md-header-anchor '></a>14.6.2 URL重写</h4><blockquote><p>浏览器在访问服务器上的某个地址时，不会使用原来的那个地址，而是使用经过改写的地址（即在原来的地址后面加上了sessionID）</p></blockquote><h4><a name='header-n757' class='md-header-anchor '></a>14.6.2 实现URL重写</h4><blockquote><p>response.encodeRedirectURL(String url);//生成重写的URL</p></blockquote><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n760" mdtype="fences">HttpSession session = request.getSession();
//重写URL追加SessionId
String newUrl = resp.encodeRedirectURL("/WebProject_war_exploded/cs");
System.out.println(newUrl);
resp.sendRedirect(newUrl)
</pre><h3><a name='header-n761' class='md-header-anchor '></a>14.7 Session实战权限验证</h3><p><img src='https://img-blog.csdnimg.cn/80c5f44a0ed64f62a04d07e9dba63488.png' alt='在这里插入图片描述' referrerPolicy='no-referrer' /></p><blockquote><p>管理员登录进行信息验证，展示所有用户信息</p></blockquote><h4><a name='header-n765' class='md-header-anchor '></a>14.7.1 login.html</h4><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="html" contenteditable="false" cid="n766" mdtype="fences" style="break-inside: unset;">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
    &lt;head&gt;
        &lt;meta charset="UTF-8"&gt;
        &lt;title&gt;登陆页面&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;

        &lt;h1&gt;用户登录页面&lt;/h1&gt;
        &lt;/br&gt;
    &lt;form action="/JavaWebProject_war_exploded/login" method="get"&gt;
        &lt;input type="text" name="username"/&gt;
        &lt;/br&gt;
    &lt;input type="password" name="password"/&gt;
    &lt;/br&gt;
&lt;input type="submit" value="登陆"&gt;
&lt;/form&gt;

&lt;/body&gt;
&lt;/html&gt;
</pre><h4><a name='header-n767' class='md-header-anchor '></a>14.7.2 LoginServlet</h4><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n768" mdtype="fences" style="break-inside: unset;">package com.servlet;

import com.entity.User;
import com.service.UserService;
import com.service.impl.UserServiceImpl;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;
import java.io.IOException;
import java.io.PrintWriter;

@WebServlet(value = "/login")
public class LoginServlet extends HttpServlet {

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        req.setCharacterEncoding("UTF-8");
        resp.setContentType("text/html;charset=UTF-8");
        //收参
        String username = req.getParameter("username");
        String password = req.getParameter("password");
        //调用业务逻辑
        UserService userService = new UserServiceImpl();
        User user = userService.login(username, password);
        //处理结果
        PrintWriter out = resp.getWriter();
        if(user!=null){
            //响应给客户端结果页面，显示登陆成功
//            out.println("&lt;html&gt;&lt;body&gt;");
//            out.println("&lt;h1&gt;" + "登陆成功" + "&lt;/h1&gt;");
//            out.println("&lt;h1&gt;" + "登陆成功" + "&lt;/h1&gt;");
//            out.println("&lt;h1&gt;" + "登陆成功" + "&lt;/h1&gt;");
//            out.println("&lt;/body&gt;&lt;/html&gt;");
            //登录成功
            //将信息存储在Session中
            HttpSession session = req.getSession();
            session.setAttribute("user",user);
            //目标跳转、方式
            resp.sendRedirect("/JavaWebProject_war_exploded/showallusercontroller");
        } else {
            //响应登陆失败
//            out.println("&lt;html&gt;&lt;body&gt;");
//            out.println("&lt;h1&gt;" + "登陆失败" + "&lt;/h1&gt;");
//            out.println("&lt;h1&gt;" + "登陆失败" + "&lt;/h1&gt;");
//            out.println("&lt;h1&gt;" + "登陆失败" + "&lt;/h1&gt;");
//            out.println("&lt;/body&gt;&lt;/html&gt;");
            //登录失败
            //重新登录
            resp.sendRedirect("/JavaWebProject_var_exploded/login.html");
        }
    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        doGet(req, resp);
    }
}
</pre><h4><a name='header-n769' class='md-header-anchor '></a>14.7.3 ShowAllUserController</h4><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n770" mdtype="fences" style="break-inside: unset;">package com.servlet;

import com.entity.User;
import com.service.impl.UserServiceImpl;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;
import java.io.IOException;
import java.util.List;


@WebServlet("/showallusercontroller")
public class ShowAllUserController extends HttpServlet {

    //调用业务逻辑功能

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {

        //权限验证
        HttpSession session = req.getSession();
        //作用域获取数据
        User user = (User)session.getAttribute("user");
        if (user!=null){
            UserServiceImpl userService = new UserServiceImpl();
            List&lt;User&gt; userList = userService.showAllUser();
            //存储数据
            req.setAttribute("users",userList);
            //跳转到JSP
            req.getRequestDispatcher("/showalluserjsp").forward(req,resp);
        } else {
            //目标跳转、方式
            resp.sendRedirect("/JavaWebProject_war_exploded/login.html");
        }
//        UserServiceImpl userService = new UserServiceImpl();
//        List&lt;User&gt; userList = userService.showAllUser();
//        //存储数据
//        req.setAttribute("users",userList);
//        //跳转到JSP
//        req.getRequestDispatcher("/showalluserjsp").forward(req,resp);
    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        doGet(req, resp);
    }
}
</pre><h4><a name='header-n771' class='md-header-anchor '></a>14.7.4 ShowAllUserJSP</h4><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n772" mdtype="fences" style="break-inside: unset;">package com.servlet;

import com.entity.User;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.List;


@WebServlet("/showalluserjsp")
public class ShowAllUserJSP extends HttpServlet {

    //获取数据
    //显示结果
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        resp.setContentType("text/html;charset=utf-8");
        List&lt;User&gt; userList = (List&lt;User&gt;) req.getAttribute("users");
        PrintWriter printWriter = resp.getWriter();
        if (userList!=null){
            printWriter.println("&lt;html&gt;");
            printWriter.println("&lt;head&gt;");
            printWriter.println("&lt;meta charset='utf-8'&gt;");
            printWriter.println("&lt;title&gt;显示所有数据信息&lt;/title&gt;");
            printWriter.println("&lt;/head&gt;");
            printWriter.println("&lt;body&gt;");
            printWriter.println("&lt;h1&gt;" + "数据展示" + "&lt;/h1&gt;");
            printWriter.println("&lt;h1&gt;" + "数据展示" + "&lt;/h1&gt;");
            printWriter.println("&lt;h1&gt;" + "数据展示" + "&lt;/h1&gt;");
            printWriter.println("&lt;table border='1'&gt;");
            printWriter.println("   &lt;tr&gt;");
            printWriter.println("       &lt;td&gt;username&lt;/td&gt;");
            printWriter.println("       &lt;td&gt;password&lt;/td&gt;");
            printWriter.println("       &lt;td&gt;phone&lt;/td&gt;");
            printWriter.println("       &lt;td&gt;address&lt;/td&gt;");
            printWriter.println("   &lt;/tr&gt;");
            for(User user : userList){
                printWriter.println("   &lt;tr&gt;");
                printWriter.println("       &lt;td&gt;"+user.getName()+"&lt;/td&gt;");
                printWriter.println("       &lt;td&gt;"+user.getPassword()+"&lt;/td&gt;");
                printWriter.println("       &lt;td&gt;"+user.getPhone()+"&lt;/td&gt;");
                printWriter.println("       &lt;td&gt;"+user.getAddress()+"&lt;/td&gt;");
                printWriter.println("   &lt;/tr&gt;");
            }
            printWriter.println("&lt;/table&gt;");
            printWriter.println("&lt;/body&gt;");
            printWriter.println("&lt;/html&gt;");
        } else{
            //响应登陆失败
            printWriter.println("&lt;html&gt;&lt;body&gt;");
            printWriter.println("&lt;h1&gt;" + "无数据" + "&lt;/h1&gt;");
            printWriter.println("&lt;h1&gt;" + "无数据" + "&lt;/h1&gt;");
            printWriter.println("&lt;h1&gt;" + "无数据" + "&lt;/h1&gt;");
            printWriter.println("&lt;/body&gt;&lt;/html&gt;");
        }

    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        doGet(req, resp);
    }
}
</pre><h3><a name='header-n773' class='md-header-anchor '></a>14.8 Session实战保存验证码</h3><h4><a name='header-n774' class='md-header-anchor '></a>14.8.1 login.html</h4><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="html" contenteditable="false" cid="n775" mdtype="fences" style="break-inside: unset;">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
    &lt;head&gt;
        &lt;meta charset="UTF-8"&gt;
        &lt;title&gt;登陆页面&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;

        &lt;h1&gt;用户登录页面&lt;/h1&gt;
        &lt;/br&gt;
    &lt;form action="/JavaWebProject_war_exploded/login" method="get"&gt;
        &lt;input type="text" name="username"/&gt;
        &lt;/br&gt;
    &lt;input type="password" name="password"/&gt;
    &lt;/br&gt;&lt;/br&gt;
&lt;h4&gt;验证码：&lt;/h4&gt;
&lt;input type="text" name="inputVCode"/&gt;&lt;img src="/JavaWebProject_war_exploded/CreateCodeController"/&gt;
&lt;/br&gt;&lt;/br&gt;
&lt;input type="submit" value="登录"&gt;
&lt;/form&gt;

&lt;/body&gt;
&lt;/html&gt;
</pre><h4><a name='header-n776' class='md-header-anchor '></a>14.8.2 CreateCodeController</h4><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n777" mdtype="fences" style="break-inside: unset;">package com.servlet;

import cn.dsna.util.images.ValidateCode;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.annotation.*;
import java.io.IOException;

@WebServlet(name = "CreateCodeController", value = "/CreateCodeController")
public class CreateCodeController extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        doPost(request,response);
    }

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        //创建验证码图片
        ValidateCode validateCode = new ValidateCode(200,30,4,20);
        HttpSession session = request.getSession();
        session.setAttribute("codes",validateCode.getCode());
        //验证码图片响应给客户端
        validateCode.write(response.getOutputStream());

    }
}
</pre><h4><a name='header-n778' class='md-header-anchor '></a>14.8.3 LoginServlet</h4><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n779" mdtype="fences" style="break-inside: unset;">package com.servlet;

import com.entity.User;
import com.service.UserService;
import com.service.impl.UserServiceImpl;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;
import java.io.IOException;
import java.io.PrintWriter;

@WebServlet(value = "/login")
public class LoginServlet extends HttpServlet {

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        req.setCharacterEncoding("UTF-8");
        resp.setContentType("text/html;charset=UTF-8");
        //收参
        String username = req.getParameter("username");
        String password = req.getParameter("password");
        String inputVCode = req.getParameter("inputVCode");
        String codes = (String)req.getSession().getAttribute("codes");
        PrintWriter out = resp.getWriter();
        if (!inputVCode.isEmpty()&amp;&amp;inputVCode.equalsIgnoreCase(codes)) {
            //调用业务逻辑
            UserService userService = new UserServiceImpl();
            User user = userService.login(username, password);
            //处理结果

            if(user!=null){
                //响应给客户端结果页面，显示登陆成功
                out.println("&lt;html&gt;&lt;body&gt;");
                out.println("&lt;h1&gt;" + "登陆成功" + "&lt;/h1&gt;");
                out.println("&lt;h1&gt;" + "登陆成功" + "&lt;/h1&gt;");
                out.println("&lt;h1&gt;" + "登陆成功" + "&lt;/h1&gt;");
                out.println("&lt;/body&gt;&lt;/html&gt;");

            } else {
                //响应登陆失败
                out.println("&lt;html&gt;&lt;body&gt;");
                out.println("&lt;h1&gt;" + "登陆失败" + "&lt;/h1&gt;");
                out.println("&lt;h1&gt;" + "登陆失败" + "&lt;/h1&gt;");
                out.println("&lt;h1&gt;" + "登陆失败" + "&lt;/h1&gt;");
                out.println("&lt;h1&gt;" + "用户名或密码错误" + "&lt;/h1&gt;");
                out.println("&lt;/body&gt;&lt;/html&gt;");
            }
        } else {
//            out.println("&lt;html&gt;&lt;body&gt;");
//            out.println("&lt;h1&gt;" + "登陆失败" + "&lt;/h1&gt;");
//            out.println("&lt;h1&gt;" + "登陆失败" + "&lt;/h1&gt;");
//            out.println("&lt;h1&gt;" + "登陆失败" + "&lt;/h1&gt;");
//            out.println("&lt;h1&gt;" + "验证码错误" + "&lt;/h1&gt;");
//            out.println("&lt;/body&gt;&lt;/html&gt;");
            resp.sendRedirect("/JavaWebProject_war_exploded/login.html");
        }

    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        doGet(req, resp);
    }
}
</pre><h2><a name='header-n780' class='md-header-anchor '></a>15. ServletContext对象</h2><h3><a name='header-n781' class='md-header-anchor '></a>15.1 ServletContext概述</h3><blockquote><ul><li>全局对象，也拥有作用域，对应一个Tomcat中的Web应用</li><li>当Web服务器启动时，会为每一个Web应用程序创建一块共享的存储区域（ServletContext）</li><li>ServletContext在Web服务器启动时创建，服务器关闭时销毁</li></ul></blockquote><h3><a name='header-n790' class='md-header-anchor '></a>15.2 获取ServletContext对象</h3><blockquote><ul><li>GenericServlet提供了getServletContext()方法（推荐）this.getServletContext();</li><li>HttpServletRequest提供了getServletContext()方法（推荐）</li><li>HttpSession提供了getServletContext()方法</li></ul></blockquote><h3><a name='header-n799' class='md-header-anchor '></a>15.3 ServletContext作用</h3><h4><a name='header-n800' class='md-header-anchor '></a>15.3.1 获取项目真实路径</h4><blockquote><p>获取当前项目在服务器发布的真实路径</p></blockquote><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n803" mdtype="fences">String realPath = servletContext.getRealPath("/");
</pre><h4><a name='header-n804' class='md-header-anchor '></a>15.3.2 获取项目上下文路径</h4><blockquote><p>获取当前项目上下文路径（应用程序名称）</p></blockquote><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n807" mdtype="fences">System.out.println(servletContext.getContextPath());
System.out.println(request.getContextPath());
</pre><h4><a name='header-n808' class='md-header-anchor '></a>15.3.3 全局容器</h4><blockquote><p>ServletContext拥有作用域，可以存储数据到全局容器中</p><ul><li>存储数据：servletContext.setAttribute(&quot;name&quot;,value);</li><li>获取数据：servletContext.getAttribute(&quot;name&quot;);</li><li>移除数据：servletContext.removeAttribute(&quot;name&quot;);</li></ul></blockquote><h3><a name='header-n818' class='md-header-anchor '></a>15.4 ServletContext特点</h3><blockquote><ul><li>唯一性：一个应用对应一个ServletContext</li><li>生命周期：只要容器不关闭或者应用不卸载，ServletContext就一直存在</li></ul></blockquote><h3><a name='header-n825' class='md-header-anchor '></a>15.5 ServeltContext应用场景</h3><blockquote><p>ServletContext统计当前项目访问次数</p></blockquote><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n828" mdtype="fences" style="break-inside: unset;">package com.servlet;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.annotation.*;
import java.io.IOException;
import java.io.PrintWriter;

@WebServlet(name = "Servlet1", value = "/Servlet1")
public class Servlet1 extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        ServletContext servletContext = request.getServletContext();
        Integer count = (Integer) servletContext.getAttribute("count");
        if (count==null){
            count = 1;
            servletContext.setAttribute("count",count);
        } else {
            count++;
            servletContext.setAttribute("count",count);
        }
        PrintWriter writer = response.getWriter();
        writer.write("servlet访问次数：" + count);
    }

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        doGet(request,response);
    }
}
</pre><h3><a name='header-n829' class='md-header-anchor '></a>15.6 作用域总结</h3><blockquote><ul><li>HttpServletRequest：一次请求，请求响应之前有效</li><li>HTTPSession：一次会话开始，浏览器不关闭或不超时之前有效</li><li>ServletContext：服务器启动开始，服务器停止之前有效</li></ul></blockquote><h2><a name='header-n838' class='md-header-anchor '></a>16. 过滤器</h2><h3><a name='header-n839' class='md-header-anchor '></a>16.1 问题</h3><blockquote><p>在以往的Servlet中，存在冗余代码，多个Servlet都要进行编写</p></blockquote><h3><a name='header-n842' class='md-header-anchor '></a>16.2 概念</h3><blockquote><p>过滤器（Filter）是处于客户端与服务器目标资源之间的一道过滤技术</p></blockquote><p><img src='https://img-blog.csdnimg.cn/54119765de794839827f789a959744c7.png' alt='在这里插入图片描述' referrerPolicy='no-referrer' /></p><h3><a name='header-n846' class='md-header-anchor '></a>16.3 过滤器作用</h3><blockquote><ul><li>执行地位在Servlet之前，客户端发送请求时，会先经过Filter，再到达目标Servlet中；响应时，会根据执行流程再次反向执行Filter</li><li>可以解决多个Servlet共性代码的冗余问题，如乱码处理，登录验证</li></ul></blockquote><h3><a name='header-n853' class='md-header-anchor '></a>16.4 编写过滤器</h3><blockquote><p>Servlet API中提供了一个Filter接口，开发人员编写一个Java类实现这个接口即可，这个Java类称之为过滤器（Filter）</p></blockquote><h4><a name='header-n856' class='md-header-anchor '></a>16.4.1 实现过程</h4><blockquote><ul><li>编写Java类实现Filter接口</li><li>在doFilter方法中编写拦截逻辑</li><li>设置拦截路径</li></ul></blockquote><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n865" mdtype="fences" style="break-inside: unset;">package com.filter;

import javax.servlet.*;
import javax.servlet.annotation.WebFilter;
import java.io.IOException;

@WebFilter("/FilterTestServlet")
public class MyFilter implements Filter {
    @Override
    public void init(FilterConfig filterConfig) throws ServletException {

    }

    @Override
    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {
        System.out.println("过滤器拦截操作");
        //请求放行
        filterChain.doFilter(servletRequest,servletResponse);
        System.out.println("过滤器响应拦截");
    }

    @Override
    public void destroy() {

    }
}
</pre><h3><a name='header-n866' class='md-header-anchor '></a>16.5 过滤器配置</h3><h4><a name='header-n867' class='md-header-anchor '></a>16.5.1 注解配置</h4><blockquote><p>在自定义的Filter类上使用注解@WebFilter(value=&quot;/过滤目标资源&quot;)</p></blockquote><h4><a name='header-n870' class='md-header-anchor '></a>16.5.2 xml文件配置</h4><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="xml" contenteditable="false" cid="n871" mdtype="fences" style="break-inside: unset;">&lt;!--过滤器xnl配置--&gt;
&lt;filter&gt;
	&lt;!--名称--&gt;
    &lt;filter-name&gt;sss&lt;/filter-name&gt;
    &lt;!--过滤器全类名--&gt;
    &lt;filter-class&gt;com.filter.MyFilter&lt;/filter-class&gt;
&lt;/filter&gt;
&lt;!--映射路径配置--&gt;
&lt;filter-mapping&gt;
	&lt;!--名称--&gt;
    &lt;filter-name&gt;sss&lt;/filter-name&gt;
    &lt;!--过滤的url匹配规则和Servlet类似--&gt;
    &lt;url-patterm&gt;/*&lt;/url-patterm&gt;
&lt;/filter-mapping&gt;
</pre><h4><a name='header-n872' class='md-header-anchor '></a>16.5.3 过滤器路径</h4><blockquote><p>三种形式：</p><ul><li>精确过滤匹配：/index.jsp、/myservlet</li><li>后缀过滤匹配：*.jsp</li><li>通配符过滤匹配：/*表示拦截所有，注意过滤器不能使用/匹配</li></ul></blockquote><h3><a name='header-n882' class='md-header-anchor '></a>16.6 过滤器链和优先级</h3><h4><a name='header-n883' class='md-header-anchor '></a>16.6.1 过滤器链</h4><blockquote><p>客户端对服务器请求之后，服务器调用Servlet之前会执行一组过滤器（多个过滤器），那么这组过滤器就称为一条过滤器链</p><p>每个过滤器实现某个特定的功能，当第一个Filter的doFilter方法被调用时，Web服务器会创建一个代表Filter链的FilterChain对象传递给该方法，在doFilter方法中，开发人员如果调用了FilterChain对象的doFilter方法，则Web服务器会检查FilterChain对象中是否还有filter，如果有，则调用第二个filter，如果没有，则调用目标资源</p></blockquote><p><img src='https://img-blog.csdnimg.cn/5611e62219fc498ca4a5666855860d83.png' alt='在这里插入图片描述' referrerPolicy='no-referrer' /></p><h4><a name='header-n888' class='md-header-anchor '></a>16.6.2 过滤器优先级</h4><blockquote><p>在一个Web应用中，可以开发编写多个Filter，这些Filter组合起来成为一个Filter链，优先级：</p><ul><li>如果为注解，则按照类全名称的字符串顺序决定作用顺序</li><li>如果为web.xml，则按照filter-mapping注册顺序，从上到下</li><li>web.xml配置高于注解方式</li><li>如果注解和web.xml同时配置，会创建多个过滤器对象，造成过滤多次</li></ul></blockquote><h3><a name='header-n900' class='md-header-anchor '></a>16.7 过滤器典型应用</h3><h4><a name='header-n901' class='md-header-anchor '></a>16.7.1 过滤器解决编码问题</h4><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n902" mdtype="fences" style="break-inside: unset;">package com.filter;

import javax.servlet.*;
import javax.servlet.annotation.*;
import java.io.IOException;

@WebFilter(filterName = "EncodingFilter",value = "/*")
public class EncodingFilter implements Filter {
    public void init(FilterConfig config) throws ServletException {
    }

    public void destroy() {
    }

    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws ServletException, IOException {
        //统一处理请求和响应的乱码
        request.setCharacterEncoding("UTF-8");
        response.setContentType("text/html;charset=utf-8");
        chain.doFilter(request, response);
    }
}
</pre><h4><a name='header-n903' class='md-header-anchor '></a>16.7.2 过滤器登录验证</h4><pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n904" mdtype="fences" style="break-inside: unset;">package com.filter;

import com.entity.User;

import javax.servlet.*;
import javax.servlet.annotation.*;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;
import java.io.IOException;

@WebFilter(filterName = "LoginCheckFilter")
public class LoginCheckFilter implements Filter {
    public void init(FilterConfig config) throws ServletException {
    }

    public void destroy() {
    }

    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws ServletException, IOException {
        //登录权限验证
        //向下转型（拆箱）
        HttpServletRequest req = (HttpServletRequest)request;
        HttpServletResponse resp = (HttpServletResponse)response;
        HttpSession session = req.getSession();
        User user = (User)session.getAttribute("user");
        if(user!=null){
            //登录过，直接放行
            chain.doFilter(req, resp);
        } else {
            //打回登录页面
            resp.sendRedirect(req.getContextPath() + "/login.html");
        }

    }
}
</pre><h2><a name='header-n905' class='md-header-anchor '></a>17. 综合案例</h2><h3><a name='header-n906' class='md-header-anchor '></a>17.1 数据库环境搭建</h3><h4><a name='header-n907' class='md-header-anchor '></a>17.1.1 创建数据库</h4><h4><a name='header-n908' class='md-header-anchor '></a>17.1.2 创建数据表</h4><h3><a name='header-n909' class='md-header-anchor '></a>17.2 创建Web项目</h3><h3><a name='header-n910' class='md-header-anchor '></a>17.3 基础环境搭建</h3><h3><a name='header-n911' class='md-header-anchor '></a>17.4 管理员登录功能</h3><h3><a name='header-n912' class='md-header-anchor '></a>17.5 查询所有员工功能</h3><h4><a name='header-n913' class='md-header-anchor '></a>17.5.1 调用业务逻辑Controller</h4><h4><a name='header-n914' class='md-header-anchor '></a>17.5.2 显示页面JSP</h4><h4><a name='header-n915' class='md-header-anchor '></a>17.5.3 权限验证过滤器</h4><h4><a name='header-n916' class='md-header-anchor '></a>17.5.4 字符编码过滤器</h4><h3><a name='header-n917' class='md-header-anchor '></a>17.6 删除员工功能</h3><h4><a name='header-n918' class='md-header-anchor '></a>17.6.1 删除员工Controller</h4><h3><a name='header-n919' class='md-header-anchor '></a>17.7 修改员工功能</h3><h4><a name='header-n920' class='md-header-anchor '></a>17.7.1 查询单个员工Controller</h4><h4><a name='header-n921' class='md-header-anchor '></a>17.7.2 显示修改页面JSP</h4><h4><a name='header-n922' class='md-header-anchor '></a>17.7.3 修改员工信息Controller</h4><h3><a name='header-n923' class='md-header-anchor '></a>18. 后会有期</h3><blockquote><p>路漫漫其修远兮，吾将上下而求索</p></blockquote><blockquote><p>纸上得来终觉浅，绝知此事要躬行</p></blockquote></div>
</body>
</html>